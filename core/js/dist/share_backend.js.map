{"version":3,"file":"share_backend.js","sources":["webpack:///webpack/bootstrap","webpack:///./core/js/merged-share-backend.js","webpack:///./core/js/share.js","webpack:///./core/js/shareconfigmodel.js","webpack:///./core/js/sharedialoglinkshareview.js","webpack:///./core/js/sharedialogresharerinfoview.js","webpack:///./core/js/sharedialogshareelistview.js","webpack:///./core/js/sharedialogview.js","webpack:///./core/js/shareitemmodel.js","webpack:///./core/js/sharesocialmanager.js","webpack:///./core/js/sharetemplates.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./core/js/merged-share-backend.js\");\n","import './shareconfigmodel.js';\nimport './sharetemplates.js';\nimport './shareitemmodel.js';\nimport './sharesocialmanager.js';\nimport './sharedialogresharerinfoview.js';\nimport './sharedialoglinkshareview.js';\nimport './sharedialogshareelistview.js';\nimport './sharedialogview.js';\nimport './share.js';","/* global escapeHTML */\n\n/**\n * @namespace\n */\nOC.Share = _.extend(OC.Share || {}, {\n  SHARE_TYPE_USER: 0,\n  SHARE_TYPE_GROUP: 1,\n  SHARE_TYPE_LINK: 3,\n  SHARE_TYPE_EMAIL: 4,\n  SHARE_TYPE_REMOTE: 6,\n  SHARE_TYPE_CIRCLE: 7,\n  SHARE_TYPE_GUEST: 8,\n  SHARE_TYPE_REMOTE_GROUP: 9,\n  SHARE_TYPE_ROOM: 10,\n\n  /**\n   * Regular expression for splitting parts of remote share owners:\n   * \"user@example.com/path/to/owncloud\"\n   * \"user@anotherexample.com@example.com/path/to/owncloud\n   */\n  _REMOTE_OWNER_REGEXP: new RegExp(\"^([^@]*)@(([^@]*)@)?([^/]*)([/](.*)?)?$\"),\n\n  /**\n   * @deprecated use OC.Share.currentShares instead\n   */\n  itemShares: [],\n\n  /**\n   * Full list of all share statuses\n   */\n  statuses: {},\n\n  /**\n   * Shares for the currently selected file.\n   * (for which the dropdown is open)\n   *\n   * Key is item type and value is an array or\n   * shares of the given item type.\n   */\n  currentShares: {},\n\n  /**\n   * Whether the share dropdown is opened.\n   */\n  droppedDown: false,\n\n  /**\n   * Loads ALL share statuses from server, stores them in\n   * OC.Share.statuses then calls OC.Share.updateIcons() to update the\n   * files \"Share\" icon to \"Shared\" according to their share status and\n   * share type.\n   *\n   * If a callback is specified, the update step is skipped.\n   *\n   * @param itemType item type\n   * @param fileList file list instance, defaults to OCA.Files.App.fileList\n   * @param callback function to call after the shares were loaded\n   */\n  loadIcons: function loadIcons(itemType, fileList, callback) {\n    var path = fileList.dirInfo.path;\n\n    if (path === '/') {\n      path = '';\n    }\n\n    path += '/' + fileList.dirInfo.name; // Load all share icons\n\n    $.get(OC.linkToOCS('apps/files_sharing/api/v1', 2) + 'shares', {\n      subfiles: 'true',\n      path: path,\n      format: 'json'\n    }, function (result) {\n      if (result && result.ocs.meta.statuscode === 200) {\n        OC.Share.statuses = {};\n        $.each(result.ocs.data, function (it, share) {\n          if (!(share.item_source in OC.Share.statuses)) {\n            OC.Share.statuses[share.item_source] = {\n              link: false\n            };\n          }\n\n          if (share.share_type === OC.Share.SHARE_TYPE_LINK) {\n            OC.Share.statuses[share.item_source] = {\n              link: true\n            };\n          }\n        });\n\n        if (_.isFunction(callback)) {\n          callback(OC.Share.statuses);\n        } else {\n          OC.Share.updateIcons(itemType, fileList);\n        }\n      }\n    });\n  },\n\n  /**\n   * Updates the files' \"Share\" icons according to the known\n   * sharing states stored in OC.Share.statuses.\n   * (not reloaded from server)\n   *\n   * @param itemType item type\n   * @param fileList file list instance\n   * defaults to OCA.Files.App.fileList\n   */\n  updateIcons: function updateIcons(itemType, fileList) {\n    var item;\n    var $fileList;\n    var currentDir;\n\n    if (!fileList && OCA.Files) {\n      fileList = OCA.Files.App.fileList;\n    } // fileList is usually only defined in the files app\n\n\n    if (fileList) {\n      $fileList = fileList.$fileList;\n      currentDir = fileList.getCurrentDirectory();\n    } // TODO: iterating over the files might be more efficient\n\n\n    for (item in OC.Share.statuses) {\n      var iconClass = 'icon-shared';\n      var data = OC.Share.statuses[item];\n      var hasLink = data.link; // Links override shared in terms of icon display\n\n      if (hasLink) {\n        iconClass = 'icon-public';\n      }\n\n      if (itemType !== 'file' && itemType !== 'folder') {\n        $('a.share[data-item=\"' + item + '\"] .icon').removeClass('icon-shared icon-public').addClass(iconClass);\n      } else {\n        // TODO: ultimately this part should be moved to files_sharing app\n        var file = $fileList.find('tr[data-id=\"' + item + '\"]');\n        var shareFolder = OC.imagePath('core', 'filetypes/folder-shared');\n        var img;\n\n        if (file.length > 0) {\n          this.markFileAsShared(file, true, hasLink);\n        } else {\n          var dir = currentDir;\n\n          if (dir.length > 1) {\n            var last = '';\n            var path = dir; // Search for possible parent folders that are shared\n\n            while (path != last) {\n              if (path === data.path && !data.link) {\n                var actions = $fileList.find('.fileactions .action[data-action=\"Share\"]');\n                var files = $fileList.find('.filename');\n                var i;\n\n                for (i = 0; i < actions.length; i++) {\n                  // TODO: use this.markFileAsShared()\n                  img = $(actions[i]).find('img');\n\n                  if (img.attr('src') !== OC.imagePath('core', 'actions/public')) {\n                    img.attr('src', image);\n                    $(actions[i]).addClass('permanent');\n                    $(actions[i]).html('<span> ' + t('core', 'Shared') + '</span>').prepend(img);\n                  }\n                }\n\n                for (i = 0; i < files.length; i++) {\n                  if ($(files[i]).closest('tr').data('type') === 'dir') {\n                    $(files[i]).find('.thumbnail').css('background-image', 'url(' + shareFolder + ')');\n                  }\n                }\n              }\n\n              last = path;\n              path = OC.Share.dirname(path);\n            }\n          }\n        }\n      }\n    }\n  },\n  updateIcon: function updateIcon(itemType, itemSource) {\n    var shares = false;\n    var link = false;\n    var iconClass = '';\n    $.each(OC.Share.itemShares, function (index) {\n      if (OC.Share.itemShares[index]) {\n        if (index == OC.Share.SHARE_TYPE_LINK) {\n          if (OC.Share.itemShares[index] == true) {\n            shares = true;\n            iconClass = 'icon-public';\n            link = true;\n            return;\n          }\n        } else if (OC.Share.itemShares[index].length > 0) {\n          shares = true;\n          iconClass = 'icon-shared';\n        }\n      }\n    });\n\n    if (itemType != 'file' && itemType != 'folder') {\n      $('a.share[data-item=\"' + itemSource + '\"] .icon').removeClass('icon-shared icon-public').addClass(iconClass);\n    } else {\n      var $tr = $('tr').filterAttr('data-id', String(itemSource));\n\n      if ($tr.length > 0) {\n        // it might happen that multiple lists exist in the DOM\n        // with the same id\n        $tr.each(function () {\n          OC.Share.markFileAsShared($(this), shares, link);\n        });\n      }\n    }\n\n    if (shares) {\n      OC.Share.statuses[itemSource] = OC.Share.statuses[itemSource] || {};\n      OC.Share.statuses[itemSource].link = link;\n    } else {\n      delete OC.Share.statuses[itemSource];\n    }\n  },\n\n  /**\n   * Format a remote address\n   *\n   * @param {String} shareWith userid, full remote share, or whatever\n   * @param {String} shareWithDisplayName\n   * @param {String} message\n   * @return {String} HTML code to display\n   */\n  _formatRemoteShare: function _formatRemoteShare(shareWith, shareWithDisplayName, message) {\n    var parts = this._REMOTE_OWNER_REGEXP.exec(shareWith);\n\n    if (!parts) {\n      // display avatar of the user\n      var avatar = '<span class=\"avatar\" data-username=\"' + escapeHTML(shareWith) + '\" title=\"' + message + \" \" + escapeHTML(shareWithDisplayName) + '\"></span>';\n      var hidden = '<span class=\"hidden-visually\">' + message + ' ' + escapeHTML(shareWithDisplayName) + '</span> ';\n      return avatar + hidden;\n    }\n\n    var userName = parts[1];\n    var userDomain = parts[3];\n    var server = parts[4];\n    var tooltip = message + ' ' + userName;\n\n    if (userDomain) {\n      tooltip += '@' + userDomain;\n    }\n\n    if (server) {\n      if (!userDomain) {\n        userDomain = '…';\n      }\n\n      tooltip += '@' + server;\n    }\n\n    var html = '<span class=\"remoteAddress\" title=\"' + escapeHTML(tooltip) + '\">';\n    html += '<span class=\"username\">' + escapeHTML(userName) + '</span>';\n\n    if (userDomain) {\n      html += '<span class=\"userDomain\">@' + escapeHTML(userDomain) + '</span>';\n    }\n\n    html += '</span> ';\n    return html;\n  },\n\n  /**\n   * Loop over all recipients in the list and format them using\n   * all kind of fancy magic.\n   *\n   * @param {Object} recipients array of all the recipients\n   * @return {String[]} modified list of recipients\n   */\n  _formatShareList: function _formatShareList(recipients) {\n    var _parent = this;\n\n    recipients = _.toArray(recipients);\n    recipients.sort(function (a, b) {\n      return a.shareWithDisplayName.localeCompare(b.shareWithDisplayName);\n    });\n    return $.map(recipients, function (recipient) {\n      return _parent._formatRemoteShare(recipient.shareWith, recipient.shareWithDisplayName, t('core', 'Shared with'));\n    });\n  },\n\n  /**\n   * Marks/unmarks a given file as shared by changing its action icon\n   * and folder icon.\n   *\n   * @param $tr file element to mark as shared\n   * @param hasShares whether shares are available\n   * @param hasLink whether link share is available\n   */\n  markFileAsShared: function markFileAsShared($tr, hasShares, hasLink) {\n    var action = $tr.find('.fileactions .action[data-action=\"Share\"]');\n    var type = $tr.data('type');\n    var icon = action.find('.icon');\n    var message, recipients, avatars;\n    var ownerId = $tr.attr('data-share-owner-id');\n    var owner = $tr.attr('data-share-owner');\n    var shareFolderIcon;\n    var iconClass = 'icon-shared';\n    action.removeClass('shared-style'); // update folder icon\n\n    if (type === 'dir' && (hasShares || hasLink || ownerId)) {\n      if (hasLink) {\n        shareFolderIcon = OC.MimeType.getIconUrl('dir-public');\n      } else {\n        shareFolderIcon = OC.MimeType.getIconUrl('dir-shared');\n      }\n\n      $tr.find('.filename .thumbnail').css('background-image', 'url(' + shareFolderIcon + ')');\n      $tr.attr('data-icon', shareFolderIcon);\n    } else if (type === 'dir') {\n      var isEncrypted = $tr.attr('data-e2eencrypted');\n      var mountType = $tr.attr('data-mounttype'); // FIXME: duplicate of FileList._createRow logic for external folder,\n      // need to refactor the icon logic into a single code path eventually\n\n      if (isEncrypted === 'true') {\n        shareFolderIcon = OC.MimeType.getIconUrl('dir-encrypted');\n        $tr.attr('data-icon', shareFolderIcon);\n      } else if (mountType && mountType.indexOf('external') === 0) {\n        shareFolderIcon = OC.MimeType.getIconUrl('dir-external');\n        $tr.attr('data-icon', shareFolderIcon);\n      } else {\n        shareFolderIcon = OC.MimeType.getIconUrl('dir'); // back to default\n\n        $tr.removeAttr('data-icon');\n      }\n\n      $tr.find('.filename .thumbnail').css('background-image', 'url(' + shareFolderIcon + ')');\n    } // update share action text / icon\n\n\n    if (hasShares || ownerId) {\n      recipients = $tr.data('share-recipient-data');\n      action.addClass('shared-style');\n      avatars = '<span>' + t('core', 'Shared') + '</span>'; // even if reshared, only show \"Shared by\"\n\n      if (ownerId) {\n        message = t('core', 'Shared by');\n        avatars = this._formatRemoteShare(ownerId, owner, message);\n      } else if (recipients) {\n        avatars = this._formatShareList(recipients);\n      }\n\n      action.html(avatars).prepend(icon);\n\n      if (ownerId || recipients) {\n        var avatarElement = action.find('.avatar');\n        avatarElement.each(function () {\n          $(this).avatar($(this).data('username'), 32);\n        });\n        action.find('span[title]').tooltip({\n          placement: 'top'\n        });\n      }\n    } else {\n      action.html('<span class=\"hidden-visually\">' + t('core', 'Shared') + '</span>').prepend(icon);\n    }\n\n    if (hasLink) {\n      iconClass = 'icon-public';\n    }\n\n    icon.removeClass('icon-shared icon-public').addClass(iconClass);\n  },\n  showDropDown: function showDropDown(itemType, itemSource, appendTo, link, possiblePermissions, filename) {\n    var configModel = new OC.Share.ShareConfigModel();\n    var attributes = {\n      itemType: itemType,\n      itemSource: itemSource,\n      possiblePermissions: possiblePermissions\n    };\n    var itemModel = new OC.Share.ShareItemModel(attributes, {\n      configModel: configModel\n    });\n    var dialogView = new OC.Share.ShareDialogView({\n      id: 'dropdown',\n      model: itemModel,\n      configModel: configModel,\n      className: 'drop shareDropDown',\n      attributes: {\n        'data-item-source-name': filename,\n        'data-item-type': itemType,\n        'data-item-source': itemSource\n      }\n    });\n    dialogView.setShowLink(link);\n    var $dialog = dialogView.render().$el;\n    $dialog.appendTo(appendTo);\n    $dialog.slideDown(OC.menuSpeed, function () {\n      OC.Share.droppedDown = true;\n    });\n    itemModel.fetch();\n  },\n  hideDropDown: function hideDropDown(callback) {\n    OC.Share.currentShares = null;\n    $('#dropdown').slideUp(OC.menuSpeed, function () {\n      OC.Share.droppedDown = false;\n      $('#dropdown').remove();\n\n      if (typeof FileActions !== 'undefined') {\n        $('tr').removeClass('mouseOver');\n      }\n\n      if (callback) {\n        callback.call();\n      }\n    });\n  },\n  dirname: function dirname(path) {\n    return path.replace(/\\\\/g, '/').replace(/\\/[^\\/]*$/, '');\n  }\n});\n$(document).ready(function () {\n  if (typeof monthNames != 'undefined') {\n    // min date should always be the next day\n    var minDate = new Date();\n    minDate.setDate(minDate.getDate() + 1);\n    $.datepicker.setDefaults({\n      monthNames: monthNames,\n      monthNamesShort: monthNamesShort,\n      dayNames: dayNames,\n      dayNamesMin: dayNamesMin,\n      dayNamesShort: dayNamesShort,\n      firstDay: firstDay,\n      minDate: minDate\n    });\n  }\n\n  $(this).click(function (event) {\n    var target = $(event.target);\n    var isMatched = !target.is('.drop, .ui-datepicker-next, .ui-datepicker-prev, .ui-icon') && !target.closest('#ui-datepicker-div').length && !target.closest('.ui-autocomplete').length;\n\n    if (OC.Share && OC.Share.droppedDown && isMatched && $('#dropdown').has(event.target).length === 0) {\n      OC.Share.hideDropDown();\n    }\n  });\n});","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global moment, oc_appconfig, oc_config */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n    OC.Share.Types = {};\n  } // FIXME: the config model should populate its own model attributes based on\n  // the old DOM-based config\n\n\n  var ShareConfigModel = OC.Backbone.Model.extend({\n    defaults: {\n      publicUploadEnabled: false,\n      enforcePasswordForPublicLink: oc_appconfig.core.enforcePasswordForPublicLink,\n      enableLinkPasswordByDefault: oc_appconfig.core.enableLinkPasswordByDefault,\n      isDefaultExpireDateEnforced: oc_appconfig.core.defaultExpireDateEnforced === true,\n      isDefaultExpireDateEnabled: oc_appconfig.core.defaultExpireDateEnabled === true,\n      isRemoteShareAllowed: oc_appconfig.core.remoteShareAllowed,\n      isMailShareAllowed: oc_appconfig.shareByMailEnabled !== undefined,\n      defaultExpireDate: oc_appconfig.core.defaultExpireDate,\n      isResharingAllowed: oc_appconfig.core.resharingAllowed,\n      isPasswordForMailSharesRequired: oc_appconfig.shareByMail === undefined ? false : oc_appconfig.shareByMail.enforcePasswordProtection,\n      allowGroupSharing: oc_appconfig.core.allowGroupSharing\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isPublicUploadEnabled: function isPublicUploadEnabled() {\n      var publicUploadEnabled = $('#filestable').data('allow-public-upload');\n      return publicUploadEnabled === 'yes';\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isShareWithLinkAllowed: function isShareWithLinkAllowed() {\n      return $('#allowShareWithLink').val() === 'yes';\n    },\n\n    /**\n     * @returns {string}\n     */\n    getFederatedShareDocLink: function getFederatedShareDocLink() {\n      return oc_appconfig.core.federatedCloudShareDoc;\n    },\n    getDefaultExpirationDateString: function getDefaultExpirationDateString() {\n      var expireDateString = '';\n\n      if (this.get('isDefaultExpireDateEnabled')) {\n        var date = moment.utc();\n        var expireAfterDays = this.get('defaultExpireDate');\n        date.add(expireAfterDays, 'days');\n        expireDateString = date.format('YYYY-MM-DD 00:00:00');\n      }\n\n      return expireDateString;\n    }\n  });\n  OC.Share.ShareConfigModel = ShareConfigModel;\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Clipboard, Handlebars */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n  }\n\n  var PASSWORD_PLACEHOLDER = '**********';\n  var PASSWORD_PLACEHOLDER_MESSAGE = t('core', 'Choose a password for the public link');\n  var PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL = t('core', 'Choose a password for the public link or press the \"Enter\" key');\n  /**\n   * @class OCA.Share.ShareDialogLinkShareView\n   * @member {OC.Share.ShareItemModel} model\n   * @member {jQuery} $el\n   * @memberof OCA.Sharing\n   * @classdesc\n   *\n   * Represents the GUI of the share dialogue\n   *\n   */\n\n  var ShareDialogLinkShareView = OC.Backbone.View.extend({\n    /** @type {string} **/\n    id: 'shareDialogLinkShare',\n\n    /** @type {OC.Share.ShareConfigModel} **/\n    configModel: undefined,\n\n    /** @type {boolean} **/\n    showLink: true,\n\n    /** @type {boolean} **/\n    showPending: false,\n\n    /** @type {string} **/\n    password: '',\n\n    /** @type {string} **/\n    newShareId: 'new-share',\n    events: {\n      // open menu\n      'click .share-menu .icon-more': 'onToggleMenu',\n      // hide download\n      'change .hideDownloadCheckbox': 'onHideDownloadChange',\n      // password\n      'click input.share-pass-submit': 'onPasswordEntered',\n      'keyup input.linkPassText': 'onPasswordKeyUp',\n      // check for the enter key\n      'change .showPasswordCheckbox': 'onShowPasswordClick',\n      'change .passwordByTalkCheckbox': 'onPasswordByTalkChange',\n      'change .publicEditingCheckbox': 'onAllowPublicEditingChange',\n      // copy link url\n      'click .linkText': 'onLinkTextClick',\n      // social\n      'click .pop-up': 'onPopUpClick',\n      // permission change\n      'change .publicUploadRadio': 'onPublicUploadChange',\n      // expire date\n      'click .expireDate': 'onExpireDateChange',\n      'change .datepicker': 'onChangeExpirationDate',\n      'click .datepicker': 'showDatePicker',\n      // note\n      'click .share-add': 'showNoteForm',\n      'click .share-note-delete': 'deleteNote',\n      'click .share-note-submit': 'updateNote',\n      // remove\n      'click .unshare': 'onUnshare',\n      // new share\n      'click .new-share': 'newShare',\n      // enforced pass set\n      'submit .enforcedPassForm': 'enforcedPasswordSet'\n    },\n    initialize: function initialize(options) {\n      var view = this;\n      this.model.on('change:permissions', function () {\n        view.render();\n      });\n      this.model.on('change:itemType', function () {\n        view.render();\n      });\n      this.model.on('change:allowPublicUploadStatus', function () {\n        view.render();\n      });\n      this.model.on('change:hideFileListStatus', function () {\n        view.render();\n      });\n      this.model.on('change:linkShares', function (model, linkShares) {\n        // The \"Password protect by Talk\" item is shown only when there\n        // is a password. Unfortunately there is no fine grained\n        // rendering of items in the link shares, so the whole view\n        // needs to be rendered again when the password of a share\n        // changes.\n        // Note that this event handler is concerned only about password\n        // changes; other changes in the link shares does not trigger\n        // a rendering, so the view must be rendered again as needed in\n        // those cases (for example, when a link share is removed).\n        var previousLinkShares = model.previous('linkShares');\n\n        if (previousLinkShares.length !== linkShares.length) {\n          return;\n        }\n\n        var i;\n\n        for (i = 0; i < linkShares.length; i++) {\n          if (linkShares[i].id !== previousLinkShares[i].id) {\n            // A resorting should never happen, but just in case.\n            return;\n          }\n\n          if (linkShares[i].password !== previousLinkShares[i].password) {\n            view.render();\n            return;\n          }\n        }\n      });\n\n      if (!_.isUndefined(options.configModel)) {\n        this.configModel = options.configModel;\n      } else {\n        throw 'missing OC.Share.ShareConfigModel';\n      }\n\n      var clipboard = new Clipboard('.clipboard-button');\n      clipboard.on('success', function (e) {\n        var $trigger = $(e.trigger);\n        $trigger.tooltip('hide').attr('data-original-title', t('core', 'Copied!')).tooltip('fixTitle').tooltip({\n          placement: 'bottom',\n          trigger: 'manual'\n        }).tooltip('show');\n\n        _.delay(function () {\n          $trigger.tooltip('hide').attr('data-original-title', t('core', 'Copy link')).tooltip('fixTitle');\n        }, 3000);\n      });\n      clipboard.on('error', function (e) {\n        var $trigger = $(e.trigger);\n        var $menu = $trigger.next('.share-menu').find('.popovermenu');\n        var $linkTextMenu = $menu.find('li.linkTextMenu');\n        var $input = $linkTextMenu.find('.linkText');\n        var $li = $trigger.closest('li[data-share-id]');\n        var shareId = $li.data('share-id'); // show menu\n\n        OC.showMenu(null, $menu);\n        var actionMsg = '';\n\n        if (/iPhone|iPad/i.test(navigator.userAgent)) {\n          actionMsg = t('core', 'Not supported!');\n        } else if (/Mac/i.test(navigator.userAgent)) {\n          actionMsg = t('core', 'Press ⌘-C to copy.');\n        } else {\n          actionMsg = t('core', 'Press Ctrl-C to copy.');\n        }\n\n        $linkTextMenu.removeClass('hidden');\n        $input.select();\n        $input.tooltip('hide').attr('data-original-title', actionMsg).tooltip('fixTitle').tooltip({\n          placement: 'bottom',\n          trigger: 'manual'\n        }).tooltip('show');\n\n        _.delay(function () {\n          $input.tooltip('hide');\n          $input.attr('data-original-title', t('core', 'Copy')).tooltip('fixTitle');\n        }, 3000);\n      });\n    },\n    newShare: function newShare(event) {\n      var self = this;\n      var $target = $(event.target);\n      var $li = $target.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $loading = $li.find('.share-menu > .icon-loading-small');\n\n      if (!$loading.hasClass('hidden') && this.password === '') {\n        // in process\n        return false;\n      } // hide all icons and show loading\n\n\n      $li.find('.icon').addClass('hidden');\n      $loading.removeClass('hidden'); // hide menu\n\n      OC.hideMenus();\n      var shareData = {};\n      var isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n      var isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced'); // set default expire date\n\n      if (isExpirationEnforced) {\n        var defaultExpireDays = this.configModel.get('defaultExpireDate');\n        var expireDate = moment().add(defaultExpireDays, 'day').format('DD-MM-YYYY');\n        shareData.expireDate = expireDate;\n      } // if password is set, add to data\n\n\n      if (isPasswordEnforced && this.password !== '') {\n        shareData.password = this.password;\n      }\n\n      var newShareId = false; // We need a password before the share creation\n\n      if (isPasswordEnforced && !this.showPending && this.password === '') {\n        this.showPending = shareId;\n        var self = this.render();\n        self.$el.find('.pending #enforcedPassText').focus();\n      } else {\n        // else, we have a password or it is not enforced\n        $.when(this.model.saveLinkShare(shareData, {\n          success: function success() {\n            $loading.addClass('hidden');\n            $li.find('.icon').removeClass('hidden');\n            self.render(); // open the menu by default\n            // we can only do that after the render\n\n            if (newShareId) {\n              var shares = self.$el.find('li[data-share-id]');\n              var $newShare = self.$el.find('li[data-share-id=\"' + newShareId + '\"]'); // only open the menu by default if this is the first share\n\n              if ($newShare && shares.length === 1) {\n                var $menu = $newShare.find('.popovermenu');\n                OC.showMenu(null, $menu);\n              }\n            }\n          },\n          error: function error() {// empty function to override the default Dialog warning\n          }\n        })).fail(function (response) {\n          // password failure? Show error\n          self.password = '';\n\n          if (isPasswordEnforced && response && response.responseJSON && response.responseJSON.ocs.meta && response.responseJSON.ocs.meta.message) {\n            var $input = self.$el.find('.pending #enforcedPassText');\n            $input.tooltip('destroy');\n            $input.attr('title', response.responseJSON.ocs.meta.message);\n            $input.tooltip({\n              placement: 'bottom',\n              trigger: 'manual'\n            });\n            $input.tooltip('show');\n          } else {\n            OC.Notification.showTemporary(t('core', 'Unable to create a link share'));\n            $loading.addClass('hidden');\n            $li.find('.icon').removeClass('hidden');\n          }\n        }).then(function (response) {\n          // resolve before success\n          newShareId = response.ocs.data.id;\n        });\n      }\n    },\n    enforcedPasswordSet: function enforcedPasswordSet(event) {\n      event.preventDefault();\n      var $form = $(event.target);\n      var $input = $form.find('input.enforcedPassText');\n      this.password = $input.val();\n      this.showPending = false;\n      this.newShare(event);\n    },\n    onLinkTextClick: function onLinkTextClick(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var $el = $li.find('.linkText');\n      $el.focus();\n      $el.select();\n    },\n    onHideDownloadChange: function onHideDownloadChange(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $checkbox = $li.find('.hideDownloadCheckbox');\n      $checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n      var hideDownload = false;\n\n      if ($checkbox.is(':checked')) {\n        hideDownload = true;\n      }\n\n      this.model.saveLinkShare({\n        hideDownload: hideDownload,\n        cid: shareId\n      }, {\n        success: function success() {\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        },\n        error: function error(obj, msg) {\n          OC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        }\n      });\n    },\n    onShowPasswordClick: function onShowPasswordClick(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      $li.find('.linkPass').slideToggle(OC.menuSpeed);\n      $li.find('.linkPassMenu').toggleClass('hidden');\n\n      if (!$li.find('.showPasswordCheckbox').is(':checked')) {\n        this.model.saveLinkShare({\n          password: '',\n          cid: shareId\n        });\n      } else {\n        if (!OC.Util.isIE()) {\n          $li.find('.linkPassText').focus();\n        }\n      }\n    },\n    onPasswordKeyUp: function onPasswordKeyUp(event) {\n      if (event.keyCode === 13) {\n        this.onPasswordEntered(event);\n      }\n    },\n    onPasswordEntered: function onPasswordEntered(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $loading = $li.find('.linkPassMenu .icon-loading-small');\n\n      if (!$loading.hasClass('hidden')) {\n        // still in process\n        return;\n      }\n\n      var $input = $li.find('.linkPassText');\n      $input.removeClass('error');\n      var password = $input.val();\n\n      if ($li.find('.linkPassText').attr('placeholder') === PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL) {\n        // in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n        if (password === PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL) {\n          password = '';\n        }\n      } else {\n        // in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n        if (password === '' || password === PASSWORD_PLACEHOLDER || password === PASSWORD_PLACEHOLDER_MESSAGE) {\n          return;\n        }\n      }\n\n      $loading.removeClass('hidden').addClass('inlineblock');\n      this.model.saveLinkShare({\n        password: password,\n        cid: shareId\n      }, {\n        complete: function complete(model) {\n          $loading.removeClass('inlineblock').addClass('hidden');\n        },\n        error: function error(model, msg) {\n          // destroy old tooltips\n          var $container = $input.parent();\n          $container.tooltip('destroy');\n          $input.addClass('error');\n          $container.attr('title', msg);\n          $container.tooltip({\n            placement: 'bottom',\n            trigger: 'manual'\n          });\n          $container.tooltip('show');\n        }\n      });\n    },\n    onPasswordByTalkChange: function onPasswordByTalkChange(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $checkbox = $li.find('.passwordByTalkCheckbox');\n      $checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n      var sendPasswordByTalk = false;\n\n      if ($checkbox.is(':checked')) {\n        sendPasswordByTalk = true;\n      }\n\n      this.model.saveLinkShare({\n        sendPasswordByTalk: sendPasswordByTalk,\n        cid: shareId\n      }, {\n        success: function success() {\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        },\n        error: function error(obj, msg) {\n          OC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        }\n      });\n    },\n    onAllowPublicEditingChange: function onAllowPublicEditingChange(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $checkbox = $li.find('.publicEditingCheckbox');\n      $checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n      var permissions = OC.PERMISSION_READ;\n\n      if ($checkbox.is(':checked')) {\n        permissions = OC.PERMISSION_UPDATE | OC.PERMISSION_READ;\n      }\n\n      this.model.saveLinkShare({\n        permissions: permissions,\n        cid: shareId\n      }, {\n        success: function success() {\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        },\n        error: function error(obj, msg) {\n          OC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n          $checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n        }\n      });\n    },\n    onPublicUploadChange: function onPublicUploadChange(event) {\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var permissions = event.currentTarget.value;\n      this.model.saveLinkShare({\n        permissions: permissions,\n        cid: shareId\n      });\n    },\n    showNoteForm: function showNoteForm(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var $menu = $element.closest('li');\n      var $form = $menu.next('li.share-note-form'); // show elements\n\n      $menu.find('.share-note-delete').toggleClass('hidden');\n      $form.toggleClass('hidden');\n      $form.find('textarea').focus();\n    },\n    deleteNote: function deleteNote(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $menu = $element.closest('li');\n      var $form = $menu.next('li.share-note-form');\n      $form.find('.share-note').val('');\n      $form.addClass('hidden');\n      $menu.find('.share-note-delete').addClass('hidden');\n      self.sendNote('', shareId, $menu);\n    },\n    updateNote: function updateNote(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $form = $element.closest('li.share-note-form');\n      var $menu = $form.prev('li');\n      var message = $form.find('.share-note').val().trim();\n\n      if (message.length < 1) {\n        return;\n      }\n\n      self.sendNote(message, shareId, $menu);\n    },\n    sendNote: function sendNote(note, shareId, $menu) {\n      var $form = $menu.next('li.share-note-form');\n      var $submit = $form.find('input.share-note-submit');\n      var $error = $form.find('input.share-note-error');\n      $submit.prop('disabled', true);\n      $menu.find('.icon-loading-small').removeClass('hidden');\n      $menu.find('.icon-edit').hide();\n\n      var complete = function complete() {\n        $submit.prop('disabled', false);\n        $menu.find('.icon-loading-small').addClass('hidden');\n        $menu.find('.icon-edit').show();\n      };\n\n      var error = function error() {\n        $error.show();\n        setTimeout(function () {\n          $error.hide();\n        }, 3000);\n      }; // send data\n\n\n      $.ajax({\n        method: 'PUT',\n        url: OC.linkToOCS('apps/files_sharing/api/v1/shares', 2) + shareId + '?' + OC.buildQueryString({\n          format: 'json'\n        }),\n        data: {\n          note: note\n        },\n        complete: complete,\n        error: error\n      });\n    },\n    render: function render() {\n      this.$el.find('.has-tooltip').tooltip(); // reset previously set passwords\n\n      this.password = '';\n      var linkShareTemplate = this.template();\n      var resharingAllowed = this.model.sharePermissionPossible();\n\n      if (!resharingAllowed || !this.showLink || !this.configModel.isShareWithLinkAllowed()) {\n        var templateData = {\n          shareAllowed: false\n        };\n\n        if (!resharingAllowed) {\n          // add message\n          templateData.noSharingPlaceholder = t('core', 'Resharing is not allowed');\n        }\n\n        this.$el.html(linkShareTemplate(templateData));\n        return this;\n      }\n\n      var publicUpload = this.model.isFolder() && this.model.createPermissionPossible() && this.configModel.isPublicUploadEnabled();\n      var publicEditingChecked = '';\n\n      if (this.model.isPublicEditingAllowed()) {\n        publicEditingChecked = 'checked=\"checked\"';\n      }\n\n      var isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n      var isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n      var passwordPlaceholderInitial = this.configModel.get('enforcePasswordForPublicLink') ? PASSWORD_PLACEHOLDER_MESSAGE : PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL;\n      var publicEditable = !this.model.isFolder() && this.model.updatePermissionPossible();\n      var isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced'); // what if there is another date picker on that page?\n\n      var minDate = new Date(); // min date should always be the next day\n\n      minDate.setDate(minDate.getDate() + 1);\n      $.datepicker.setDefaults({\n        minDate: minDate\n      });\n      this.$el.find('.datepicker').datepicker({\n        dateFormat: 'dd-mm-yy'\n      });\n      var minPasswordLength = 4; // password policy?\n\n      if (oc_capabilities.password_policy && oc_capabilities.password_policy.minLength) {\n        minPasswordLength = oc_capabilities.password_policy.minLength;\n      }\n\n      var popoverBase = {\n        urlLabel: t('core', 'Link'),\n        hideDownloadLabel: t('core', 'Hide download'),\n        enablePasswordLabel: isPasswordEnforced ? t('core', 'Password protection enforced') : t('core', 'Password protect'),\n        passwordLabel: t('core', 'Password'),\n        passwordPlaceholderInitial: passwordPlaceholderInitial,\n        publicUpload: publicUpload,\n        publicEditing: publicEditable,\n        publicEditingChecked: publicEditingChecked,\n        publicEditingLabel: t('core', 'Allow editing'),\n        mailPrivatePlaceholder: t('core', 'Email link to person'),\n        mailButtonText: t('core', 'Send'),\n        publicUploadRWLabel: t('core', 'Allow upload and editing'),\n        publicUploadRLabel: t('core', 'Read only'),\n        publicUploadWLabel: t('core', 'File drop (upload only)'),\n        publicUploadRWValue: OC.PERMISSION_UPDATE | OC.PERMISSION_CREATE | OC.PERMISSION_READ | OC.PERMISSION_DELETE,\n        publicUploadRValue: OC.PERMISSION_READ,\n        publicUploadWValue: OC.PERMISSION_CREATE,\n        expireDateLabel: isExpirationEnforced ? t('core', 'Expiration date enforced') : t('core', 'Set expiration date'),\n        expirationLabel: t('core', 'Expiration'),\n        expirationDatePlaceholder: t('core', 'Expiration date'),\n        isExpirationEnforced: isExpirationEnforced,\n        isPasswordEnforced: isPasswordEnforced,\n        defaultExpireDate: moment().add(1, 'day').format('DD-MM-YYYY'),\n        // Can't expire today\n        addNoteLabel: t('core', 'Note to recipient'),\n        unshareLabel: t('core', 'Unshare'),\n        unshareLinkLabel: t('core', 'Delete share link'),\n        newShareLabel: t('core', 'Add another link')\n      };\n      var pendingPopover = {\n        isPasswordEnforced: isPasswordEnforced,\n        enforcedPasswordLabel: t('core', 'Password protection for links is mandatory'),\n        passwordPlaceholder: passwordPlaceholderInitial,\n        minPasswordLength: minPasswordLength\n      };\n      var pendingPopoverMenu = this.pendingPopoverMenuTemplate(_.extend({}, pendingPopover));\n      var linkShares = this.getShareeList();\n\n      if (_.isArray(linkShares)) {\n        for (var i = 0; i < linkShares.length; i++) {\n          var social = [];\n          OC.Share.Social.Collection.each(function (model) {\n            var url = model.get('url');\n            url = url.replace('{{reference}}', linkShares[i].shareLinkURL);\n            social.push({\n              url: url,\n              label: t('core', 'Share to {name}', {\n                name: model.get('name')\n              }),\n              name: model.get('name'),\n              iconClass: model.get('iconClass'),\n              newWindow: model.get('newWindow')\n            });\n          });\n          var popover = this.getPopoverObject(linkShares[i]);\n          linkShares[i].popoverMenu = this.popoverMenuTemplate(_.extend({}, popoverBase, popover, {\n            social: social\n          }));\n          linkShares[i].pendingPopoverMenu = pendingPopoverMenu;\n        }\n      }\n\n      this.$el.html(linkShareTemplate({\n        linkShares: linkShares,\n        shareAllowed: true,\n        nolinkShares: linkShares.length === 0,\n        newShareLabel: t('core', 'Share link'),\n        newShareTitle: t('core', 'New share link'),\n        pendingPopoverMenu: pendingPopoverMenu,\n        showPending: this.showPending === this.newShareId,\n        newShareId: this.newShareId\n      }));\n      this.delegateEvents(); // new note autosize\n\n      autosize(this.$el.find('.share-note-form .share-note'));\n      return this;\n    },\n    onToggleMenu: function onToggleMenu(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var $menu = $li.find('.sharingOptionsGroup .popovermenu');\n      var shareId = $li.data('share-id');\n      OC.showMenu(null, $menu); // focus the password if not set and enforced\n\n      var isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n      var haspassword = $menu.find('.linkPassText').val() !== '';\n\n      if (!haspassword && isPasswordEnabledByDefault) {\n        $menu.find('.linkPassText').focus();\n      }\n    },\n\n    /**\n     * @returns {Function} from Handlebars\n     * @private\n     */\n    template: function template() {\n      return OC.Share.Templates['sharedialoglinkshareview'];\n    },\n\n    /**\n     * renders the popover template and returns the resulting HTML\n     *\n     * @param {Object} data\n     * @returns {string}\n     */\n    popoverMenuTemplate: function popoverMenuTemplate(data) {\n      return OC.Share.Templates['sharedialoglinkshareview_popover_menu'](data);\n    },\n\n    /**\n     * renders the pending popover template and returns the resulting HTML\n     *\n     * @param {Object} data\n     * @returns {string}\n     */\n    pendingPopoverMenuTemplate: function pendingPopoverMenuTemplate(data) {\n      return OC.Share.Templates['sharedialoglinkshareview_popover_menu_pending'](data);\n    },\n    onPopUpClick: function onPopUpClick(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var url = $(event.currentTarget).data('url');\n      var newWindow = $(event.currentTarget).data('window');\n      $(event.currentTarget).tooltip('hide');\n\n      if (url) {\n        if (newWindow === true) {\n          var width = 600;\n          var height = 400;\n          var left = screen.width / 2 - width / 2;\n          var top = screen.height / 2 - height / 2;\n          window.open(url, 'name', 'width=' + width + ', height=' + height + ', top=' + top + ', left=' + left);\n        } else {\n          window.location.href = url;\n        }\n      }\n    },\n    onExpireDateChange: function onExpireDateChange(event) {\n      var $element = $(event.target);\n      var li = $element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var expirationDatePicker = '#expirationDateContainer-' + shareId;\n      var datePicker = $(expirationDatePicker);\n      var state = $element.prop('checked');\n      datePicker.toggleClass('hidden', !state);\n\n      if (!state) {\n        // disabled, let's hide the input and\n        // set the expireDate to nothing\n        $element.closest('li').next('li').addClass('hidden');\n        this.setExpirationDate('', shareId);\n      } else {\n        // enabled, show the input and the datepicker\n        $element.closest('li').next('li').removeClass('hidden');\n        this.showDatePicker(event);\n      }\n    },\n    showDatePicker: function showDatePicker(event) {\n      var $element = $(event.target);\n      var li = $element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var maxDate = $element.data('max-date');\n      var expirationDatePicker = '#expirationDatePicker-' + shareId;\n      var self = this;\n      $(expirationDatePicker).datepicker({\n        dateFormat: 'dd-mm-yy',\n        onSelect: function onSelect(expireDate) {\n          self.setExpirationDate(expireDate, shareId);\n        },\n        maxDate: maxDate\n      });\n      $(expirationDatePicker).datepicker('show');\n      $(expirationDatePicker).focus();\n    },\n    setExpirationDate: function setExpirationDate(expireDate, shareId) {\n      this.model.saveLinkShare({\n        expireDate: expireDate,\n        cid: shareId\n      });\n    },\n    onChangeExpirationDate: function onChangeExpirationDate(event) {\n      var $element = $(event.target);\n      var expireDate = $element.val();\n      var li = $element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var expirationDatePicker = '#expirationDatePicker-' + shareId;\n      this.setExpirationDate(expireDate, shareId);\n      $(expirationDatePicker).datepicker('hide');\n    },\n\n    /**\n     * get an array of sharees' share properties\n     *\n     * @returns {Array}\n     */\n    getShareeList: function getShareeList() {\n      var shares = this.model.get('linkShares');\n\n      if (!this.model.hasLinkShares()) {\n        return [];\n      }\n\n      var list = [];\n\n      for (var index = 0; index < shares.length; index++) {\n        var share = this.getShareeObject(index); // first empty {} is necessary, otherwise we get in trouble\n        // with references\n\n        list.push(_.extend({}, share));\n      }\n\n      return list;\n    },\n\n    /**\n     *\n     * @param {OC.Share.Types.ShareInfo} shareInfo\n     * @returns {object}\n     */\n    getShareeObject: function getShareeObject(shareIndex) {\n      var share = this.model.get('linkShares')[shareIndex];\n      return _.extend({}, share, {\n        cid: share.id,\n        shareAllowed: true,\n        linkShareLabel: share.label ? share.label : t('core', 'Share link'),\n        popoverMenu: {},\n        shareLinkURL: share.url,\n        newShareTitle: t('core', 'New share link'),\n        copyLabel: t('core', 'Copy link'),\n        showPending: this.showPending === share.id,\n        linkShareCreationDate: t('core', 'Created on {time}', {\n          time: moment(share.stime * 1000).format('LLLL')\n        })\n      });\n    },\n    getPopoverObject: function getPopoverObject(share) {\n      var publicUploadRWChecked = '';\n      var publicUploadRChecked = '';\n      var publicUploadWChecked = '';\n\n      switch (this.model.linkSharePermissions(share.id)) {\n        case OC.PERMISSION_READ:\n          publicUploadRChecked = 'checked';\n          break;\n\n        case OC.PERMISSION_CREATE:\n          publicUploadWChecked = 'checked';\n          break;\n\n        case OC.PERMISSION_UPDATE | OC.PERMISSION_CREATE | OC.PERMISSION_READ | OC.PERMISSION_DELETE:\n          publicUploadRWChecked = 'checked';\n          break;\n      }\n\n      var isPasswordSet = !!share.password;\n      var isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n      var isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n      var isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced');\n      var defaultExpireDays = this.configModel.get('defaultExpireDate');\n      var hasExpireDate = !!share.expiration || isExpirationEnforced;\n      var expireDate;\n\n      if (hasExpireDate) {\n        expireDate = moment(share.expiration, 'YYYY-MM-DD').format('DD-MM-YYYY');\n      }\n\n      var isTalkEnabled = oc_appswebroots['spreed'] !== undefined;\n      var sendPasswordByTalk = share.sendPasswordByTalk;\n      var hideDownload = share.hideDownload;\n      var maxDate = null;\n\n      if (hasExpireDate) {\n        if (isExpirationEnforced) {\n          // TODO: hack: backend returns string instead of integer\n          var shareTime = share.stime;\n\n          if (_.isNumber(shareTime)) {\n            shareTime = new Date(shareTime * 1000);\n          }\n\n          if (!shareTime) {\n            shareTime = new Date(); // now\n          }\n\n          shareTime = OC.Util.stripTime(shareTime).getTime();\n          maxDate = new Date(shareTime + defaultExpireDays * 24 * 3600 * 1000);\n        }\n      }\n\n      return {\n        cid: share.id,\n        shareLinkURL: share.url,\n        passwordPlaceholder: isPasswordSet ? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE,\n        isPasswordSet: isPasswordSet || isPasswordEnabledByDefault || isPasswordEnforced,\n        showPasswordByTalkCheckBox: isTalkEnabled && isPasswordSet,\n        passwordByTalkLabel: t('core', 'Password protect by Talk'),\n        isPasswordByTalkSet: sendPasswordByTalk,\n        publicUploadRWChecked: publicUploadRWChecked,\n        publicUploadRChecked: publicUploadRChecked,\n        publicUploadWChecked: publicUploadWChecked,\n        hasExpireDate: hasExpireDate,\n        expireDate: expireDate,\n        shareNote: share.note,\n        hasNote: share.note !== '',\n        maxDate: maxDate,\n        hideDownload: hideDownload,\n        isExpirationEnforced: isExpirationEnforced\n      };\n    },\n    onUnshare: function onUnshare(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n\n      if (!$element.is('a')) {\n        $element = $element.closest('a');\n      }\n\n      var $loading = $element.find('.icon-loading-small').eq(0);\n\n      if (!$loading.hasClass('hidden')) {\n        // in process\n        return false;\n      }\n\n      $loading.removeClass('hidden');\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      self.model.removeShare(shareId, {\n        success: function success() {\n          $li.remove();\n          self.render();\n        },\n        error: function error() {\n          $loading.addClass('hidden');\n          OC.Notification.showTemporary(t('core', 'Could not unshare'));\n        }\n      });\n      return false;\n    }\n  });\n  OC.Share.ShareDialogLinkShareView = ShareDialogLinkShareView;\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n  }\n  /**\n   * @class OCA.Share.ShareDialogView\n   * @member {OC.Share.ShareItemModel} model\n   * @member {jQuery} $el\n   * @memberof OCA.Sharing\n   * @classdesc\n   *\n   * Represents the GUI of the share dialogue\n   *\n   */\n\n\n  var ShareDialogResharerInfoView = OC.Backbone.View.extend({\n    /** @type {string} **/\n    id: 'shareDialogResharerInfo',\n\n    /** @type {string} **/\n    tagName: 'div',\n\n    /** @type {string} **/\n    className: 'reshare',\n\n    /** @type {OC.Share.ShareConfigModel} **/\n    configModel: undefined,\n\n    /** @type {Function} **/\n    _template: undefined,\n    initialize: function initialize(options) {\n      var view = this;\n      this.model.on('change:reshare', function () {\n        view.render();\n      });\n\n      if (!_.isUndefined(options.configModel)) {\n        this.configModel = options.configModel;\n      } else {\n        throw 'missing OC.Share.ShareConfigModel';\n      }\n    },\n    render: function render() {\n      if (!this.model.hasReshare() || this.model.getReshareOwner() === OC.currentUser) {\n        this.$el.empty();\n        return this;\n      }\n\n      var reshareTemplate = this.template();\n      var ownerDisplayName = this.model.getReshareOwnerDisplayname();\n      var shareNote = this.model.getReshareNote();\n      var sharedByText = '';\n\n      if (this.model.getReshareType() === OC.Share.SHARE_TYPE_GROUP) {\n        sharedByText = t('core', 'Shared with you and the group {group} by {owner}', {\n          group: this.model.getReshareWithDisplayName(),\n          owner: ownerDisplayName\n        }, undefined, {\n          escape: false\n        });\n      } else if (this.model.getReshareType() === OC.Share.SHARE_TYPE_CIRCLE) {\n        sharedByText = t('core', 'Shared with you and {circle} by {owner}', {\n          circle: this.model.getReshareWithDisplayName(),\n          owner: ownerDisplayName\n        }, undefined, {\n          escape: false\n        });\n      } else if (this.model.getReshareType() === OC.Share.SHARE_TYPE_ROOM) {\n        if (this.model.get('reshare').share_with_displayname) {\n          sharedByText = t('core', 'Shared with you and the conversation {conversation} by {owner}', {\n            conversation: this.model.getReshareWithDisplayName(),\n            owner: ownerDisplayName\n          }, undefined, {\n            escape: false\n          });\n        } else {\n          sharedByText = t('core', 'Shared with you in a conversation by {owner}', {\n            owner: ownerDisplayName\n          }, undefined, {\n            escape: false\n          });\n        }\n      } else {\n        sharedByText = t('core', 'Shared with you by {owner}', {\n          owner: ownerDisplayName\n        }, undefined, {\n          escape: false\n        });\n      }\n\n      this.$el.html(reshareTemplate({\n        reshareOwner: this.model.getReshareOwner(),\n        sharedByText: sharedByText,\n        shareNote: shareNote,\n        hasShareNote: shareNote !== ''\n      }));\n      this.$el.find('.avatar').each(function () {\n        var $this = $(this);\n        $this.avatar($this.data('username'), 32);\n      });\n      this.$el.find('.reshare').contactsMenu(this.model.getReshareOwner(), OC.Share.SHARE_TYPE_USER, this.$el);\n      return this;\n    },\n\n    /**\n     * @returns {Function} from Handlebars\n     * @private\n     */\n    template: function template() {\n      return OC.Share.Templates['sharedialogresharerinfoview'];\n    }\n  });\n  OC.Share.ShareDialogResharerInfoView = ShareDialogResharerInfoView;\n})();","/* global OC, Handlebars */\n\n/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n(function () {\n  var PASSWORD_PLACEHOLDER = '**********';\n  var PASSWORD_PLACEHOLDER_MESSAGE = t('core', 'Choose a password for the mail share');\n\n  if (!OC.Share) {\n    OC.Share = {};\n  }\n  /**\n   * @class OCA.Share.ShareDialogShareeListView\n   * @member {OC.Share.ShareItemModel} model\n   * @member {jQuery} $el\n   * @memberof OCA.Sharing\n   * @classdesc\n   *\n   * Represents the sharee list part in the GUI of the share dialogue\n   *\n   */\n\n\n  var ShareDialogShareeListView = OC.Backbone.View.extend({\n    /** @type {string} **/\n    id: 'shareDialogLinkShare',\n\n    /** @type {OC.Share.ShareConfigModel} **/\n    configModel: undefined,\n    _menuOpen: false,\n\n    /** @type {boolean|number} **/\n    _renderPermissionChange: false,\n    events: {\n      'click .unshare': 'onUnshare',\n      'click .share-add': 'showNoteForm',\n      'click .share-note-delete': 'deleteNote',\n      'click .share-note-submit': 'updateNote',\n      'click .share-menu .icon-more': 'onToggleMenu',\n      'click .permissions': 'onPermissionChange',\n      'click .expireDate': 'onExpireDateChange',\n      'click .password': 'onMailSharePasswordProtectChange',\n      'click .passwordByTalk': 'onMailSharePasswordProtectByTalkChange',\n      'click .secureDrop': 'onSecureDropChange',\n      'keyup input.passwordField': 'onMailSharePasswordKeyUp',\n      'focusout input.passwordField': 'onMailSharePasswordEntered',\n      'change .datepicker': 'onChangeExpirationDate',\n      'click .datepicker': 'showDatePicker'\n    },\n    initialize: function initialize(options) {\n      if (!_.isUndefined(options.configModel)) {\n        this.configModel = options.configModel;\n      } else {\n        throw 'missing OC.Share.ShareConfigModel';\n      }\n\n      var view = this;\n      this.model.on('change:shares', function () {\n        view.render();\n      });\n    },\n\n    /**\n     *\n     * @param {OC.Share.Types.ShareInfo} shareInfo\n     * @returns {object}\n     */\n    getShareeObject: function getShareeObject(shareIndex) {\n      var shareWith = this.model.getShareWith(shareIndex);\n      var shareWithDisplayName = this.model.getShareWithDisplayName(shareIndex);\n      var shareWithAvatar = this.model.getShareWithAvatar(shareIndex);\n      var shareWithTitle = '';\n      var shareType = this.model.getShareType(shareIndex);\n      var sharedBy = this.model.getSharedBy(shareIndex);\n      var sharedByDisplayName = this.model.getSharedByDisplayName(shareIndex);\n      var fileOwnerUid = this.model.getFileOwnerUid(shareIndex);\n      var hasPermissionOverride = {};\n\n      if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n        shareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'group') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_REMOTE) {\n        shareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'remote') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n        shareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'remote group') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_EMAIL) {\n        shareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'email') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_CIRCLE) {} else if (shareType === OC.Share.SHARE_TYPE_ROOM) {\n        shareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'conversation') + ')';\n      }\n\n      if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n        shareWithTitle = shareWith + \" (\" + t('core', 'group') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_REMOTE) {\n        shareWithTitle = shareWith + \" (\" + t('core', 'remote') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n        shareWithTitle = shareWith + \" (\" + t('core', 'remote group') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_EMAIL) {\n        shareWithTitle = shareWith + \" (\" + t('core', 'email') + ')';\n      } else if (shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n        shareWithTitle = shareWith; // Force \"shareWith\" in the template to a safe value, as the\n        // original \"shareWith\" returned by the model may contain\n        // problematic characters like \"'\".\n\n        shareWith = 'circle-' + shareIndex;\n      }\n\n      if (sharedBy !== oc_current_user) {\n        var empty = shareWithTitle === '';\n\n        if (!empty) {\n          shareWithTitle += ' (';\n        }\n\n        shareWithTitle += t('core', 'shared by {sharer}', {\n          sharer: sharedByDisplayName\n        });\n\n        if (!empty) {\n          shareWithTitle += ')';\n        }\n      }\n\n      var share = this.model.get('shares')[shareIndex];\n      var password = share.password;\n      var hasPassword = password !== null && password !== '';\n      var sendPasswordByTalk = share.send_password_by_talk;\n      var shareNote = this.model.getNote(shareIndex);\n      return _.extend(hasPermissionOverride, {\n        cid: this.cid,\n        hasSharePermission: this.model.hasSharePermission(shareIndex),\n        editPermissionState: this.model.editPermissionState(shareIndex),\n        hasCreatePermission: this.model.hasCreatePermission(shareIndex),\n        hasUpdatePermission: this.model.hasUpdatePermission(shareIndex),\n        hasDeletePermission: this.model.hasDeletePermission(shareIndex),\n        sharedBy: sharedBy,\n        sharedByDisplayName: sharedByDisplayName,\n        shareWith: shareWith,\n        shareWithDisplayName: shareWithDisplayName,\n        shareWithAvatar: shareWithAvatar,\n        shareWithTitle: shareWithTitle,\n        shareType: shareType,\n        shareId: this.model.get('shares')[shareIndex].id,\n        modSeed: shareWithAvatar || shareType !== OC.Share.SHARE_TYPE_USER && shareType !== OC.Share.SHARE_TYPE_CIRCLE && shareType !== OC.Share.SHARE_TYPE_ROOM,\n        owner: fileOwnerUid,\n        isShareWithCurrentUser: shareType === OC.Share.SHARE_TYPE_USER && shareWith === oc_current_user,\n        canUpdateShareSettings: sharedBy === oc_current_user || fileOwnerUid === oc_current_user,\n        isRemoteShare: shareType === OC.Share.SHARE_TYPE_REMOTE,\n        isRemoteGroupShare: shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP,\n        isNoteAvailable: shareType !== OC.Share.SHARE_TYPE_REMOTE && shareType !== OC.Share.SHARE_TYPE_REMOTE_GROUP,\n        isMailShare: shareType === OC.Share.SHARE_TYPE_EMAIL,\n        isCircleShare: shareType === OC.Share.SHARE_TYPE_CIRCLE,\n        isFileSharedByMail: shareType === OC.Share.SHARE_TYPE_EMAIL && !this.model.isFolder(),\n        isPasswordSet: hasPassword && !sendPasswordByTalk,\n        isPasswordByTalkSet: hasPassword && sendPasswordByTalk,\n        isTalkEnabled: oc_appswebroots['spreed'] !== undefined,\n        secureDropMode: !this.model.hasReadPermission(shareIndex),\n        hasExpireDate: this.model.getExpireDate(shareIndex) !== null,\n        shareNote: shareNote,\n        hasNote: shareNote !== '',\n        expireDate: moment(this.model.getExpireDate(shareIndex), 'YYYY-MM-DD').format('DD-MM-YYYY'),\n        // The password placeholder does not take into account if\n        // sending the password by Talk is enabled or not; when\n        // switching from sending the password by Talk to sending the\n        // password by email the password is reused and the share\n        // updated, so the placeholder already shows the password in the\n        // brief time between disabling sending the password by email\n        // and receiving the updated share.\n        passwordPlaceholder: hasPassword ? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE,\n        passwordByTalkPlaceholder: hasPassword && sendPasswordByTalk ? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE\n      });\n    },\n    getShareProperties: function getShareProperties() {\n      return {\n        unshareLabel: t('core', 'Unshare'),\n        addNoteLabel: t('core', 'Note to recipient'),\n        canShareLabel: t('core', 'Can reshare'),\n        canEditLabel: t('core', 'Can edit'),\n        createPermissionLabel: t('core', 'Can create'),\n        updatePermissionLabel: t('core', 'Can change'),\n        deletePermissionLabel: t('core', 'Can delete'),\n        secureDropLabel: t('core', 'File drop (upload only)'),\n        expireDateLabel: t('core', 'Set expiration date'),\n        passwordLabel: t('core', 'Password protect'),\n        passwordByTalkLabel: t('core', 'Password protect by Talk'),\n        crudsLabel: t('core', 'Access control'),\n        expirationDatePlaceholder: t('core', 'Expiration date'),\n        defaultExpireDate: moment().add(1, 'day').format('DD-MM-YYYY'),\n        // Can't expire today\n        triangleSImage: OC.imagePath('core', 'actions/triangle-s'),\n        isResharingAllowed: this.configModel.get('isResharingAllowed'),\n        isPasswordForMailSharesRequired: this.configModel.get('isPasswordForMailSharesRequired'),\n        sharePermissionPossible: this.model.sharePermissionPossible(),\n        editPermissionPossible: this.model.editPermissionPossible(),\n        createPermissionPossible: this.model.createPermissionPossible(),\n        updatePermissionPossible: this.model.updatePermissionPossible(),\n        deletePermissionPossible: this.model.deletePermissionPossible(),\n        sharePermission: OC.PERMISSION_SHARE,\n        createPermission: OC.PERMISSION_CREATE,\n        updatePermission: OC.PERMISSION_UPDATE,\n        deletePermission: OC.PERMISSION_DELETE,\n        readPermission: OC.PERMISSION_READ,\n        isFolder: this.model.isFolder()\n      };\n    },\n\n    /**\n     * get an array of sharees' share properties\n     *\n     * @returns {Array}\n     */\n    getShareeList: function getShareeList() {\n      var universal = this.getShareProperties();\n\n      if (!this.model.hasUserShares()) {\n        return [];\n      }\n\n      var shares = this.model.get('shares');\n      var list = [];\n\n      for (var index = 0; index < shares.length; index++) {\n        var share = this.getShareeObject(index);\n\n        if (share.shareType === OC.Share.SHARE_TYPE_LINK) {\n          continue;\n        } // first empty {} is necessary, otherwise we get in trouble\n        // with references\n\n\n        list.push(_.extend({}, universal, share));\n      }\n\n      return list;\n    },\n    getLinkReshares: function getLinkReshares() {\n      var universal = {\n        unshareLabel: t('core', 'Unshare')\n      };\n\n      if (!this.model.hasUserShares()) {\n        return [];\n      }\n\n      var shares = this.model.get('shares');\n      var list = [];\n\n      for (var index = 0; index < shares.length; index++) {\n        var share = this.getShareeObject(index);\n\n        if (share.shareType !== OC.Share.SHARE_TYPE_LINK) {\n          continue;\n        } // first empty {} is necessary, otherwise we get in trouble\n        // with references\n\n\n        list.push(_.extend({}, universal, share, {\n          shareInitiator: shares[index].uid_owner,\n          shareInitiatorText: t('core', '{shareInitiatorDisplayName} shared via link', {\n            shareInitiatorDisplayName: shares[index].displayname_owner\n          })\n        }));\n      }\n\n      return list;\n    },\n    render: function render() {\n      if (!this._renderPermissionChange) {\n        this.$el.html(this.template({\n          cid: this.cid,\n          sharees: this.getShareeList(),\n          linkReshares: this.getLinkReshares()\n        }));\n        this.$('.avatar').each(function () {\n          var $this = $(this);\n\n          if ($this.hasClass('imageplaceholderseed')) {\n            $this.css({\n              width: 32,\n              height: 32\n            });\n\n            if ($this.data('avatar')) {\n              $this.css('border-radius', '0%');\n              $this.css('background', 'url(' + $this.data('avatar') + ') no-repeat');\n              $this.css('background-size', '31px');\n            } else {\n              $this.imageplaceholder($this.data('seed'));\n            }\n          } else {\n            //                         user,   size,  ie8fix, hidedefault,  callback, displayname\n            $this.avatar($this.data('username'), 32, undefined, undefined, undefined, $this.data('displayname'));\n          }\n        });\n        this.$('.has-tooltip').tooltip({\n          placement: 'bottom'\n        });\n        this.$('ul.shareWithList > li').each(function () {\n          var $this = $(this);\n          var shareWith = $this.data('share-with');\n          var shareType = $this.data('share-type');\n          $this.find('div.avatar, span.username').contactsMenu(shareWith, shareType, $this);\n        });\n      } else {\n        var permissionChangeShareId = parseInt(this._renderPermissionChange, 10);\n        var shareWithIndex = this.model.findShareWithIndex(permissionChangeShareId);\n        var sharee = this.getShareeObject(shareWithIndex);\n        $.extend(sharee, this.getShareProperties());\n        var $li = this.$('li[data-share-id=' + permissionChangeShareId + ']');\n        $li.find('.sharingOptionsGroup .popovermenu').replaceWith(this.popoverMenuTemplate(sharee));\n      }\n\n      var _this = this;\n\n      this.getShareeList().forEach(function (sharee) {\n        var $edit = _this.$('#canEdit-' + _this.cid + '-' + sharee.shareId);\n\n        if ($edit.length === 1) {\n          $edit.prop('checked', sharee.editPermissionState === 'checked');\n\n          if (sharee.isFolder) {\n            $edit.prop('indeterminate', sharee.editPermissionState === 'indeterminate');\n          }\n        }\n      });\n      this.$('.popovermenu').on('afterHide', function () {\n        _this._menuOpen = false;\n      });\n      this.$('.popovermenu').on('beforeHide', function () {\n        var shareId = parseInt(_this._menuOpen, 10);\n\n        if (!_.isNaN(shareId)) {\n          var datePickerClass = '.expirationDateContainer-' + _this.cid + '-' + shareId;\n          var datePickerInput = '#expirationDatePicker-' + _this.cid + '-' + shareId;\n          var expireDateCheckbox = '#expireDate-' + _this.cid + '-' + shareId;\n\n          if ($(expireDateCheckbox).prop('checked')) {\n            $(datePickerInput).removeClass('hidden-visually');\n            $(datePickerClass).removeClass('hasDatepicker');\n            $(datePickerClass + ' .ui-datepicker').hide();\n          }\n        }\n      });\n\n      if (this._menuOpen !== false) {\n        // Open menu again if it was opened before\n        var shareId = parseInt(this._menuOpen, 10);\n\n        if (!_.isNaN(shareId)) {\n          var liSelector = 'li[data-share-id=' + shareId + ']';\n          OC.showMenu(null, this.$(liSelector + ' .sharingOptionsGroup .popovermenu'));\n        }\n      }\n\n      this._renderPermissionChange = false; // new note autosize\n\n      autosize(this.$el.find('.share-note-form .share-note'));\n      this.delegateEvents();\n      return this;\n    },\n\n    /**\n     * @returns {Function} from Handlebars\n     * @private\n     */\n    template: function template(data) {\n      var sharees = data.sharees;\n\n      if (_.isArray(sharees)) {\n        for (var i = 0; i < sharees.length; i++) {\n          data.sharees[i].popoverMenu = this.popoverMenuTemplate(sharees[i]);\n        }\n      }\n\n      return OC.Share.Templates['sharedialogshareelistview'](data);\n    },\n\n    /**\n     * renders the popover template and returns the resulting HTML\n     *\n     * @param {Object} data\n     * @returns {string}\n     */\n    popoverMenuTemplate: function popoverMenuTemplate(data) {\n      return OC.Share.Templates['sharedialogshareelistview_popover_menu'](data);\n    },\n    showNoteForm: function showNoteForm(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var $element = $(event.target);\n      var $menu = $element.closest('li');\n      var $form = $menu.next('li.share-note-form'); // show elements\n\n      $menu.find('.share-note-delete').toggleClass('hidden');\n      $form.toggleClass('hidden');\n      $form.find('textarea').focus();\n    },\n    deleteNote: function deleteNote(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $menu = $element.closest('li');\n      var $form = $menu.next('li.share-note-form');\n      console.log($form.find('.share-note'));\n      $form.find('.share-note').val('');\n      $form.addClass('hidden');\n      $menu.find('.share-note-delete').addClass('hidden');\n      self.sendNote('', shareId, $menu);\n    },\n    updateNote: function updateNote(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var $form = $element.closest('li.share-note-form');\n      var $menu = $form.prev('li');\n      var message = $form.find('.share-note').val().trim();\n\n      if (message.length < 1) {\n        return;\n      }\n\n      self.sendNote(message, shareId, $menu);\n    },\n    sendNote: function sendNote(note, shareId, $menu) {\n      var $form = $menu.next('li.share-note-form');\n      var $submit = $form.find('input.share-note-submit');\n      var $error = $form.find('input.share-note-error');\n      $submit.prop('disabled', true);\n      $menu.find('.icon-loading-small').removeClass('hidden');\n      $menu.find('.icon-edit').hide();\n\n      var complete = function complete() {\n        $submit.prop('disabled', false);\n        $menu.find('.icon-loading-small').addClass('hidden');\n        $menu.find('.icon-edit').show();\n      };\n\n      var error = function error() {\n        $error.show();\n        setTimeout(function () {\n          $error.hide();\n        }, 3000);\n      }; // send data\n\n\n      $.ajax({\n        method: 'PUT',\n        url: OC.linkToOCS('apps/files_sharing/api/v1/shares', 2) + shareId + '?' + OC.buildQueryString({\n          format: 'json'\n        }),\n        data: {\n          note: note\n        },\n        complete: complete,\n        error: error\n      });\n    },\n    onUnshare: function onUnshare(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var self = this;\n      var $element = $(event.target);\n\n      if (!$element.is('a')) {\n        $element = $element.closest('a');\n      }\n\n      var $loading = $element.find('.icon-loading-small').eq(0);\n\n      if (!$loading.hasClass('hidden')) {\n        // in process\n        return false;\n      }\n\n      $loading.removeClass('hidden');\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      self.model.removeShare(shareId).done(function () {\n        $li.remove();\n      }).fail(function () {\n        $loading.addClass('hidden');\n        OC.Notification.showTemporary(t('core', 'Could not unshare'));\n      });\n      return false;\n    },\n    onToggleMenu: function onToggleMenu(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var $menu = $li.find('.sharingOptionsGroup .popovermenu');\n      OC.showMenu(null, $menu);\n      this._menuOpen = $li.data('share-id');\n    },\n    onExpireDateChange: function onExpireDateChange(event) {\n      var $element = $(event.target);\n      var li = $element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var datePickerClass = '.expirationDateContainer-' + this.cid + '-' + shareId;\n      var datePicker = $(datePickerClass);\n      var state = $element.prop('checked');\n      datePicker.toggleClass('hidden', !state);\n\n      if (!state) {\n        // disabled, let's hide the input and\n        // set the expireDate to nothing\n        $element.closest('li').next('li').addClass('hidden');\n        this.setExpirationDate(shareId, '');\n      } else {\n        // enabled, show the input and the datepicker\n        $element.closest('li').next('li').removeClass('hidden');\n        this.showDatePicker(event);\n      }\n    },\n    showDatePicker: function showDatePicker(event) {\n      var element = $(event.target);\n      var li = element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var expirationDatePicker = '#expirationDatePicker-' + this.cid + '-' + shareId;\n      var view = this;\n      $(expirationDatePicker).datepicker({\n        dateFormat: 'dd-mm-yy',\n        onSelect: function onSelect(expireDate) {\n          view.setExpirationDate(shareId, expireDate);\n        }\n      });\n      $(expirationDatePicker).focus();\n    },\n    setExpirationDate: function setExpirationDate(shareId, expireDate) {\n      this.model.updateShare(shareId, {\n        expireDate: expireDate\n      }, {});\n    },\n    onMailSharePasswordProtectChange: function onMailSharePasswordProtectChange(event) {\n      var element = $(event.target);\n      var li = element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n      var passwordContainer = $(passwordContainerClass);\n      var loading = this.$el.find(passwordContainerClass + ' .icon-loading-small');\n      var inputClass = '#passwordField-' + this.cid + '-' + shareId;\n      var passwordField = $(inputClass);\n      var state = element.prop('checked');\n      var passwordByTalkElement = $('#passwordByTalk-' + this.cid + '-' + shareId);\n      var passwordByTalkState = passwordByTalkElement.prop('checked');\n\n      if (!state && !passwordByTalkState) {\n        this.model.updateShare(shareId, {\n          password: '',\n          sendPasswordByTalk: false\n        });\n        passwordField.attr('value', '');\n        passwordField.removeClass('error');\n        passwordField.tooltip('hide');\n        loading.addClass('hidden');\n        passwordField.attr('placeholder', PASSWORD_PLACEHOLDER_MESSAGE); // We first need to reset the password field before we hide it\n\n        passwordContainer.toggleClass('hidden', !state);\n      } else if (state) {\n        if (passwordByTalkState) {\n          // Switching from sending the password by Talk to sending\n          // the password by mail can be done keeping the previous\n          // password sent by Talk.\n          this.model.updateShare(shareId, {\n            sendPasswordByTalk: false\n          });\n          var passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n          var passwordByTalkContainer = $(passwordByTalkContainerClass);\n          passwordByTalkContainer.addClass('hidden');\n          passwordByTalkElement.prop('checked', false);\n        }\n\n        passwordContainer.toggleClass('hidden', !state);\n        passwordField = '#passwordField-' + this.cid + '-' + shareId;\n        this.$(passwordField).focus();\n      }\n    },\n    onMailSharePasswordProtectByTalkChange: function onMailSharePasswordProtectByTalkChange(event) {\n      var element = $(event.target);\n      var li = element.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n      var passwordByTalkContainer = $(passwordByTalkContainerClass);\n      var loading = this.$el.find(passwordByTalkContainerClass + ' .icon-loading-small');\n      var inputClass = '#passwordByTalkField-' + this.cid + '-' + shareId;\n      var passwordByTalkField = $(inputClass);\n      var state = element.prop('checked');\n      var passwordElement = $('#password-' + this.cid + '-' + shareId);\n      var passwordState = passwordElement.prop('checked');\n\n      if (!state) {\n        this.model.updateShare(shareId, {\n          password: '',\n          sendPasswordByTalk: false\n        });\n        passwordByTalkField.attr('value', '');\n        passwordByTalkField.removeClass('error');\n        passwordByTalkField.tooltip('hide');\n        loading.addClass('hidden');\n        passwordByTalkField.attr('placeholder', PASSWORD_PLACEHOLDER_MESSAGE); // We first need to reset the password field before we hide it\n\n        passwordByTalkContainer.toggleClass('hidden', !state);\n      } else if (state) {\n        if (passwordState) {\n          // Enabling sending the password by Talk requires a new\n          // password to be given (the one sent by mail is not reused,\n          // as it would defeat the purpose of checking the identity\n          // of the sharee by Talk if it was already sent by mail), so\n          // the share is not updated until the user explicitly gives\n          // the new password.\n          var passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n          var passwordContainer = $(passwordContainerClass);\n          passwordContainer.addClass('hidden');\n          passwordElement.prop('checked', false);\n        }\n\n        passwordByTalkContainer.toggleClass('hidden', !state);\n        passwordByTalkField = '#passwordByTalkField-' + this.cid + '-' + shareId;\n        this.$(passwordByTalkField).focus();\n      }\n    },\n    onMailSharePasswordKeyUp: function onMailSharePasswordKeyUp(event) {\n      if (event.keyCode === 13) {\n        this.onMailSharePasswordEntered(event);\n      }\n    },\n    onMailSharePasswordEntered: function onMailSharePasswordEntered(event) {\n      var passwordField = $(event.target);\n      var li = passwordField.closest('li[data-share-id]');\n      var shareId = li.data('share-id');\n      var passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n      var passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n      var sendPasswordByTalk = passwordField.attr('id').startsWith('passwordByTalk');\n      var loading;\n\n      if (sendPasswordByTalk) {\n        loading = this.$el.find(passwordByTalkContainerClass + ' .icon-loading-small');\n      } else {\n        loading = this.$el.find(passwordContainerClass + ' .icon-loading-small');\n      }\n\n      if (!loading.hasClass('hidden')) {\n        // still in process\n        return;\n      }\n\n      passwordField.removeClass('error');\n      var password = passwordField.val(); // in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n\n      if (password === '' || password === PASSWORD_PLACEHOLDER || password === PASSWORD_PLACEHOLDER_MESSAGE) {\n        return;\n      }\n\n      loading.removeClass('hidden').addClass('inlineblock');\n      this.model.updateShare(shareId, {\n        password: password,\n        sendPasswordByTalk: sendPasswordByTalk\n      }, {\n        error: function error(model, msg) {\n          // destroy old tooltips\n          passwordField.tooltip('destroy');\n          loading.removeClass('inlineblock').addClass('hidden');\n          passwordField.addClass('error');\n          passwordField.attr('title', msg);\n          passwordField.tooltip({\n            placement: 'bottom',\n            trigger: 'manual'\n          });\n          passwordField.tooltip('show');\n        },\n        success: function success(model, msg) {\n          passwordField.blur();\n          passwordField.attr('value', '');\n          passwordField.attr('placeholder', PASSWORD_PLACEHOLDER);\n          loading.removeClass('inlineblock').addClass('hidden');\n        }\n      });\n    },\n    onPermissionChange: function onPermissionChange(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var permissions = OC.PERMISSION_READ;\n\n      if (this.model.isFolder()) {\n        // adjust checkbox states\n        var $checkboxes = $('.permissions', $li).not('input[name=\"edit\"]').not('input[name=\"share\"]');\n        var checked;\n\n        if ($element.attr('name') === 'edit') {\n          checked = $element.is(':checked'); // Check/uncheck Create, Update, and Delete checkboxes if Edit is checked/unck\n\n          $($checkboxes).prop('checked', checked);\n\n          if (checked) {\n            permissions |= OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE;\n          }\n        } else {\n          var numberChecked = $checkboxes.filter(':checked').length;\n          checked = numberChecked === $checkboxes.length;\n          var $editCb = $('input[name=\"edit\"]', $li);\n          $editCb.prop('checked', checked);\n          $editCb.prop('indeterminate', !checked && numberChecked > 0);\n        }\n      } else {\n        if ($element.attr('name') === 'edit' && $element.is(':checked')) {\n          permissions |= OC.PERMISSION_UPDATE;\n        }\n      }\n\n      $('.permissions', $li).not('input[name=\"edit\"]').filter(':checked').each(function (index, checkbox) {\n        permissions |= $(checkbox).data('permissions');\n      });\n      /** disable checkboxes during save operation to avoid race conditions **/\n\n      $li.find('input[type=checkbox]').prop('disabled', true);\n\n      var enableCb = function enableCb() {\n        $li.find('input[type=checkbox]').prop('disabled', false);\n      };\n\n      var errorCb = function errorCb(elem, msg) {\n        OC.dialogs.alert(msg, t('core', 'Error while sharing'));\n        enableCb();\n      };\n\n      this.model.updateShare(shareId, {\n        permissions: permissions\n      }, {\n        error: errorCb,\n        success: enableCb\n      });\n      this._renderPermissionChange = shareId;\n    },\n    onSecureDropChange: function onSecureDropChange(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var $element = $(event.target);\n      var $li = $element.closest('li[data-share-id]');\n      var shareId = $li.data('share-id');\n      var permissions = OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE | OC.PERMISSION_READ;\n\n      if ($element.is(':checked')) {\n        permissions = OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE;\n      }\n      /** disable checkboxes during save operation to avoid race conditions **/\n\n\n      $li.find('input[type=checkbox]').prop('disabled', true);\n\n      var enableCb = function enableCb() {\n        $li.find('input[type=checkbox]').prop('disabled', false);\n      };\n\n      var errorCb = function errorCb(elem, msg) {\n        OC.dialogs.alert(msg, t('core', 'Error while sharing'));\n        enableCb();\n      };\n\n      this.model.updateShare(shareId, {\n        permissions: permissions\n      }, {\n        error: errorCb,\n        success: enableCb\n      });\n      this._renderPermissionChange = shareId;\n    }\n  });\n  OC.Share.ShareDialogShareeListView = ShareDialogShareeListView;\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n  }\n  /**\n   * @class OCA.Share.ShareDialogView\n   * @member {OC.Share.ShareItemModel} model\n   * @member {jQuery} $el\n   * @memberof OCA.Sharing\n   * @classdesc\n   *\n   * Represents the GUI of the share dialogue\n   *\n   */\n\n\n  var ShareDialogView = OC.Backbone.View.extend({\n    /** @type {Object} **/\n    _templates: {},\n\n    /** @type {boolean} **/\n    _showLink: true,\n    _lookup: false,\n    _lookupAllowed: false,\n\n    /** @type {string} **/\n    tagName: 'div',\n\n    /** @type {OC.Share.ShareConfigModel} **/\n    configModel: undefined,\n\n    /** @type {object} **/\n    resharerInfoView: undefined,\n\n    /** @type {object} **/\n    linkShareView: undefined,\n\n    /** @type {object} **/\n    shareeListView: undefined,\n\n    /** @type {object} **/\n    _lastSuggestions: undefined,\n\n    /** @type {object} **/\n    _lastRecommendations: undefined,\n\n    /** @type {int} **/\n    _pendingOperationsCount: 0,\n    events: {\n      'focus .shareWithField': 'onShareWithFieldFocus',\n      'input .shareWithField': 'onShareWithFieldChanged',\n      'click .shareWithConfirm': '_confirmShare'\n    },\n    initialize: function initialize(options) {\n      var view = this;\n      this.model.on('fetchError', function () {\n        OC.Notification.showTemporary(t('core', 'Share details could not be loaded for this item.'));\n      });\n\n      if (!_.isUndefined(options.configModel)) {\n        this.configModel = options.configModel;\n      } else {\n        throw 'missing OC.Share.ShareConfigModel';\n      }\n\n      this.configModel.on('change:isRemoteShareAllowed', function () {\n        view.render();\n      });\n      this.configModel.on('change:isRemoteGroupShareAllowed', function () {\n        view.render();\n      });\n      this.model.on('change:permissions', function () {\n        view.render();\n      });\n      this.model.on('request', this._onRequest, this);\n      this.model.on('sync', this._onEndRequest, this);\n      var subViewOptions = {\n        model: this.model,\n        configModel: this.configModel\n      };\n      var subViews = {\n        resharerInfoView: 'ShareDialogResharerInfoView',\n        linkShareView: 'ShareDialogLinkShareView',\n        shareeListView: 'ShareDialogShareeListView'\n      };\n\n      for (var name in subViews) {\n        var className = subViews[name];\n        this[name] = _.isUndefined(options[name]) ? new OC.Share[className](subViewOptions) : options[name];\n      }\n\n      _.bindAll(this, 'autocompleteHandler', '_onSelectRecipient', 'onShareWithFieldChanged', 'onShareWithFieldFocus');\n\n      OC.Plugins.attach('OC.Share.ShareDialogView', this);\n    },\n    onShareWithFieldChanged: function onShareWithFieldChanged() {\n      var $el = this.$el.find('.shareWithField');\n\n      if ($el.val().length < 2) {\n        $el.removeClass('error').tooltip('hide');\n      }\n    },\n\n    /* trigger search after the field was re-selected */\n    onShareWithFieldFocus: function onShareWithFieldFocus() {\n      var $shareWithField = this.$el.find('.shareWithField');\n      $shareWithField.autocomplete(\"search\", $shareWithField.val());\n    },\n    _getSuggestions: function _getSuggestions(searchTerm, perPage, model, lookup) {\n      if (this._lastSuggestions && this._lastSuggestions.searchTerm === searchTerm && this._lastSuggestions.lookup === lookup && this._lastSuggestions.perPage === perPage && this._lastSuggestions.model === model) {\n        return this._lastSuggestions.promise;\n      }\n\n      var deferred = $.Deferred();\n      var view = this;\n      $.get(OC.linkToOCS('apps/files_sharing/api/v1') + 'sharees', {\n        format: 'json',\n        search: searchTerm,\n        lookup: lookup,\n        perPage: perPage,\n        itemType: model.get('itemType')\n      }, function (result) {\n        if (result.ocs.meta.statuscode === 100) {\n          var dynamicSort = function dynamicSort(property) {\n            return function (a, b) {\n              var aProperty = '';\n              var bProperty = '';\n\n              if (typeof a[property] !== 'undefined') {\n                aProperty = a[property];\n              }\n\n              if (typeof b[property] !== 'undefined') {\n                bProperty = b[property];\n              }\n\n              return aProperty < bProperty ? -1 : aProperty > bProperty ? 1 : 0;\n            };\n          };\n          /**\n           * Sort share entries by uuid to properly group them\n           */\n\n\n          var filter = function filter(users, groups, remotes, remote_groups, emails, circles, rooms) {\n            if (typeof emails === 'undefined') {\n              emails = [];\n            }\n\n            if (typeof circles === 'undefined') {\n              circles = [];\n            }\n\n            if (typeof rooms === 'undefined') {\n              rooms = [];\n            }\n\n            var usersLength;\n            var groupsLength;\n            var remotesLength;\n            var remoteGroupsLength;\n            var emailsLength;\n            var circlesLength;\n            var roomsLength;\n            var i, j; //Filter out the current user\n\n            usersLength = users.length;\n\n            for (i = 0; i < usersLength; i++) {\n              if (users[i].value.shareWith === OC.currentUser) {\n                users.splice(i, 1);\n                break;\n              }\n            } // Filter out the owner of the share\n\n\n            if (model.hasReshare()) {\n              usersLength = users.length;\n\n              for (i = 0; i < usersLength; i++) {\n                if (users[i].value.shareWith === model.getReshareOwner()) {\n                  users.splice(i, 1);\n                  break;\n                }\n              }\n            }\n\n            var shares = model.get('shares');\n            var sharesLength = shares.length; // Now filter out all sharees that are already shared with\n\n            for (i = 0; i < sharesLength; i++) {\n              var share = shares[i];\n\n              if (share.share_type === OC.Share.SHARE_TYPE_USER) {\n                usersLength = users.length;\n\n                for (j = 0; j < usersLength; j++) {\n                  if (users[j].value.shareWith === share.share_with) {\n                    users.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_GROUP) {\n                groupsLength = groups.length;\n\n                for (j = 0; j < groupsLength; j++) {\n                  if (groups[j].value.shareWith === share.share_with) {\n                    groups.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE) {\n                remotesLength = remotes.length;\n\n                for (j = 0; j < remotesLength; j++) {\n                  if (remotes[j].value.shareWith === share.share_with) {\n                    remotes.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n                remoteGroupsLength = remote_groups.length;\n\n                for (j = 0; j < remoteGroupsLength; j++) {\n                  if (remote_groups[j].value.shareWith === share.share_with) {\n                    remote_groups.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_EMAIL) {\n                emailsLength = emails.length;\n\n                for (j = 0; j < emailsLength; j++) {\n                  if (emails[j].value.shareWith === share.share_with) {\n                    emails.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_CIRCLE) {\n                circlesLength = circles.length;\n\n                for (j = 0; j < circlesLength; j++) {\n                  if (circles[j].value.shareWith === share.share_with) {\n                    circles.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_ROOM) {\n                roomsLength = rooms.length;\n\n                for (j = 0; j < roomsLength; j++) {\n                  if (rooms[j].value.shareWith === share.share_with) {\n                    rooms.splice(j, 1);\n                    break;\n                  }\n                }\n              }\n            }\n          };\n\n          filter(result.ocs.data.exact.users, result.ocs.data.exact.groups, result.ocs.data.exact.remotes, result.ocs.data.exact.remote_groups, result.ocs.data.exact.emails, result.ocs.data.exact.circles, result.ocs.data.exact.rooms);\n          var exactUsers = result.ocs.data.exact.users;\n          var exactGroups = result.ocs.data.exact.groups;\n          var exactRemotes = result.ocs.data.exact.remotes;\n          var exactRemoteGroups = result.ocs.data.exact.remote_groups;\n          var exactEmails = [];\n\n          if (typeof result.ocs.data.emails !== 'undefined') {\n            exactEmails = result.ocs.data.exact.emails;\n          }\n\n          var exactCircles = [];\n\n          if (typeof result.ocs.data.circles !== 'undefined') {\n            exactCircles = result.ocs.data.exact.circles;\n          }\n\n          var exactRooms = [];\n\n          if (typeof result.ocs.data.rooms !== 'undefined') {\n            exactRooms = result.ocs.data.exact.rooms;\n          }\n\n          var exactMatches = exactUsers.concat(exactGroups).concat(exactRemotes).concat(exactRemoteGroups).concat(exactEmails).concat(exactCircles).concat(exactRooms);\n          filter(result.ocs.data.users, result.ocs.data.groups, result.ocs.data.remotes, result.ocs.data.remote_groups, result.ocs.data.emails, result.ocs.data.circles, result.ocs.data.rooms);\n          var users = result.ocs.data.users;\n          var groups = result.ocs.data.groups;\n          var remotes = result.ocs.data.remotes;\n          var remoteGroups = result.ocs.data.remote_groups;\n          var lookup = result.ocs.data.lookup;\n          var lookupEnabled = result.ocs.data.lookupEnabled;\n          var emails = [];\n\n          if (typeof result.ocs.data.emails !== 'undefined') {\n            emails = result.ocs.data.emails;\n          }\n\n          var circles = [];\n\n          if (typeof result.ocs.data.circles !== 'undefined') {\n            circles = result.ocs.data.circles;\n          }\n\n          var rooms = [];\n\n          if (typeof result.ocs.data.rooms !== 'undefined') {\n            rooms = result.ocs.data.rooms;\n          }\n\n          var suggestions = exactMatches.concat(users).concat(groups).concat(remotes).concat(remoteGroups).concat(emails).concat(circles).concat(rooms).concat(lookup);\n          var grouped = suggestions.sort(dynamicSort('uuid'));\n          var previousUuid = null;\n          var groupedLength = grouped.length;\n          var result = [];\n          /**\n           * build the result array that only contains all contact entries from\n           * merged contacts, if the search term matches its contact name\n           */\n\n          for (var i = 0; i < groupedLength; i++) {\n            if (typeof grouped[i].uuid !== 'undefined' && grouped[i].uuid === previousUuid) {\n              grouped[i].merged = true;\n            }\n\n            if (searchTerm === grouped[i].name || typeof grouped[i].merged === 'undefined') {\n              result.push(grouped[i]);\n            }\n\n            previousUuid = grouped[i].uuid;\n          }\n\n          var moreResultsAvailable = oc_config['sharing.maxAutocompleteResults'] > 0 && Math.min(perPage, oc_config['sharing.maxAutocompleteResults']) <= Math.max(users.length + exactUsers.length, groups.length + exactGroups.length, remoteGroups.length + exactRemoteGroups.length, remotes.length + exactRemotes.length, emails.length + exactEmails.length, circles.length + exactCircles.length, rooms.length + exactRooms.length, lookup.length);\n\n          if (!view._lookup && lookupEnabled) {\n            result.push({\n              label: t('core', 'Search globally'),\n              value: {},\n              lookup: true\n            });\n          }\n\n          deferred.resolve(result, exactMatches, moreResultsAvailable, lookupEnabled);\n        } else {\n          deferred.reject(result.ocs.meta.message);\n        }\n      }).fail(function () {\n        deferred.reject();\n      });\n      this._lastSuggestions = {\n        searchTerm: searchTerm,\n        lookup: lookup,\n        perPage: perPage,\n        model: model,\n        promise: deferred.promise()\n      };\n      return this._lastSuggestions.promise;\n    },\n    _getRecommendations: function _getRecommendations(model) {\n      if (this._lastRecommendations && this._lastRecommendations.model === model) {\n        return this._lastRecommendations.promise;\n      }\n\n      var deferred = $.Deferred();\n      $.get(OC.linkToOCS('apps/files_sharing/api/v1') + 'sharees_recommended', {\n        format: 'json',\n        itemType: model.get('itemType')\n      }, function (result) {\n        if (result.ocs.meta.statuscode === 100) {\n          var dynamicSort = function dynamicSort(property) {\n            return function (a, b) {\n              var aProperty = '';\n              var bProperty = '';\n\n              if (typeof a[property] !== 'undefined') {\n                aProperty = a[property];\n              }\n\n              if (typeof b[property] !== 'undefined') {\n                bProperty = b[property];\n              }\n\n              return aProperty < bProperty ? -1 : aProperty > bProperty ? 1 : 0;\n            };\n          };\n          /**\n           * Sort share entries by uuid to properly group them\n           */\n\n\n          var filter = function filter(users, groups, remotes, remote_groups, emails, circles, rooms) {\n            if (typeof emails === 'undefined') {\n              emails = [];\n            }\n\n            if (typeof circles === 'undefined') {\n              circles = [];\n            }\n\n            if (typeof rooms === 'undefined') {\n              rooms = [];\n            }\n\n            var usersLength;\n            var groupsLength;\n            var remotesLength;\n            var remoteGroupsLength;\n            var emailsLength;\n            var circlesLength;\n            var roomsLength;\n            var i, j; //Filter out the current user\n\n            usersLength = users.length;\n\n            for (i = 0; i < usersLength; i++) {\n              if (users[i].value.shareWith === OC.currentUser) {\n                users.splice(i, 1);\n                break;\n              }\n            } // Filter out the owner of the share\n\n\n            if (model.hasReshare()) {\n              usersLength = users.length;\n\n              for (i = 0; i < usersLength; i++) {\n                if (users[i].value.shareWith === model.getReshareOwner()) {\n                  users.splice(i, 1);\n                  break;\n                }\n              }\n            }\n\n            var shares = model.get('shares');\n            var sharesLength = shares.length; // Now filter out all sharees that are already shared with\n\n            for (i = 0; i < sharesLength; i++) {\n              var share = shares[i];\n\n              if (share.share_type === OC.Share.SHARE_TYPE_USER) {\n                usersLength = users.length;\n\n                for (j = 0; j < usersLength; j++) {\n                  if (users[j].value.shareWith === share.share_with) {\n                    users.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_GROUP) {\n                groupsLength = groups.length;\n\n                for (j = 0; j < groupsLength; j++) {\n                  if (groups[j].value.shareWith === share.share_with) {\n                    groups.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE) {\n                remotesLength = remotes.length;\n\n                for (j = 0; j < remotesLength; j++) {\n                  if (remotes[j].value.shareWith === share.share_with) {\n                    remotes.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n                remoteGroupsLength = remote_groups.length;\n\n                for (j = 0; j < remoteGroupsLength; j++) {\n                  if (remote_groups[j].value.shareWith === share.share_with) {\n                    remote_groups.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_EMAIL) {\n                emailsLength = emails.length;\n\n                for (j = 0; j < emailsLength; j++) {\n                  if (emails[j].value.shareWith === share.share_with) {\n                    emails.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_CIRCLE) {\n                circlesLength = circles.length;\n\n                for (j = 0; j < circlesLength; j++) {\n                  if (circles[j].value.shareWith === share.share_with) {\n                    circles.splice(j, 1);\n                    break;\n                  }\n                }\n              } else if (share.share_type === OC.Share.SHARE_TYPE_ROOM) {\n                roomsLength = rooms.length;\n\n                for (j = 0; j < roomsLength; j++) {\n                  if (rooms[j].value.shareWith === share.share_with) {\n                    rooms.splice(j, 1);\n                    break;\n                  }\n                }\n              }\n            }\n          };\n\n          filter(result.ocs.data.exact.users, result.ocs.data.exact.groups, result.ocs.data.exact.remotes, result.ocs.data.exact.remote_groups, result.ocs.data.exact.emails, result.ocs.data.exact.circles, result.ocs.data.exact.rooms);\n          var exactUsers = result.ocs.data.exact.users;\n          var exactGroups = result.ocs.data.exact.groups;\n          var exactRemotes = result.ocs.data.exact.remotes || [];\n          var exactRemoteGroups = result.ocs.data.exact.remote_groups || [];\n          var exactEmails = [];\n\n          if (typeof result.ocs.data.emails !== 'undefined') {\n            exactEmails = result.ocs.data.exact.emails;\n          }\n\n          var exactCircles = [];\n\n          if (typeof result.ocs.data.circles !== 'undefined') {\n            exactCircles = result.ocs.data.exact.circles;\n          }\n\n          var exactRooms = [];\n\n          if (typeof result.ocs.data.rooms !== 'undefined') {\n            exactRooms = result.ocs.data.exact.rooms;\n          }\n\n          var exactMatches = exactUsers.concat(exactGroups).concat(exactRemotes).concat(exactRemoteGroups).concat(exactEmails).concat(exactCircles).concat(exactRooms);\n          filter(result.ocs.data.users, result.ocs.data.groups, result.ocs.data.remotes, result.ocs.data.remote_groups, result.ocs.data.emails, result.ocs.data.circles, result.ocs.data.rooms);\n          var users = result.ocs.data.users;\n          var groups = result.ocs.data.groups;\n          var remotes = result.ocs.data.remotes || [];\n          var remoteGroups = result.ocs.data.remote_groups || [];\n          var lookup = result.ocs.data.lookup || [];\n          var emails = [];\n\n          if (typeof result.ocs.data.emails !== 'undefined') {\n            emails = result.ocs.data.emails;\n          }\n\n          var circles = [];\n\n          if (typeof result.ocs.data.circles !== 'undefined') {\n            circles = result.ocs.data.circles;\n          }\n\n          var rooms = [];\n\n          if (typeof result.ocs.data.rooms !== 'undefined') {\n            rooms = result.ocs.data.rooms;\n          }\n\n          var suggestions = exactMatches.concat(users).concat(groups).concat(remotes).concat(remoteGroups).concat(emails).concat(circles).concat(rooms).concat(lookup);\n          var grouped = suggestions.sort(dynamicSort('uuid'));\n          var previousUuid = null;\n          var groupedLength = grouped.length;\n          var result = [];\n          /**\n           * build the result array that only contains all contact entries from\n           * merged contacts, if the search term matches its contact name\n           */\n\n          for (var i = 0; i < groupedLength; i++) {\n            if (typeof grouped[i].uuid !== 'undefined' && grouped[i].uuid === previousUuid) {\n              grouped[i].merged = true;\n            }\n\n            if (typeof grouped[i].merged === 'undefined') {\n              result.push(grouped[i]);\n            }\n\n            previousUuid = grouped[i].uuid;\n          }\n\n          var moreResultsAvailable = oc_config['sharing.maxAutocompleteResults'] > 0 && Math.min(perPage, oc_config['sharing.maxAutocompleteResults']) <= Math.max(users.length + exactUsers.length, groups.length + exactGroups.length, remoteGroups.length + exactRemoteGroups.length, remotes.length + exactRemotes.length, emails.length + exactEmails.length, circles.length + exactCircles.length, rooms.length + exactRooms.length, lookup.length);\n          deferred.resolve(result, exactMatches, moreResultsAvailable);\n        } else {\n          deferred.reject(result.ocs.meta.message);\n        }\n      }).fail(function () {\n        deferred.reject();\n      });\n      this._lastRecommendations = {\n        model: model,\n        promise: deferred.promise()\n      };\n      return this._lastRecommendations.promise;\n    },\n    recommendationHandler: function recommendationHandler(response) {\n      var view = this;\n      var $shareWithField = $('.shareWithField');\n\n      this._getRecommendations(view.model).done(function (suggestions) {\n        console.info('recommendations', suggestions);\n\n        if (suggestions.length > 0) {\n          $shareWithField.autocomplete(\"option\", \"autoFocus\", true);\n          response(suggestions);\n        } else {\n          console.info('no sharing recommendations found');\n          response();\n        }\n      }).fail(function (message) {\n        console.error('could not load recommendations', message);\n      });\n    },\n    autocompleteHandler: function autocompleteHandler(search, response) {\n      // If nothing is entered we show recommendations instead of search\n      // results\n      if (search.term.length === 0) {\n        console.info(search.term, 'empty search term -> using recommendations');\n        this.recommendationHandler(response);\n        return;\n      }\n\n      var $shareWithField = $('.shareWithField'),\n          view = this,\n          $loading = this.$el.find('.shareWithLoading'),\n          $confirm = this.$el.find('.shareWithConfirm');\n      var count = oc_config['sharing.minSearchStringLength'];\n\n      if (search.term.trim().length < count) {\n        var title = n('core', 'At least {count} character is needed for autocompletion', 'At least {count} characters are needed for autocompletion', count, {\n          count: count\n        });\n        $shareWithField.addClass('error').attr('data-original-title', title).tooltip('hide').tooltip({\n          placement: 'bottom',\n          trigger: 'manual'\n        }).tooltip('fixTitle').tooltip('show');\n        response();\n        return;\n      }\n\n      $loading.removeClass('hidden');\n      $loading.addClass('inlineblock');\n      $confirm.addClass('hidden');\n      this._pendingOperationsCount++;\n      $shareWithField.removeClass('error').tooltip('hide');\n      var perPage = parseInt(oc_config['sharing.maxAutocompleteResults'], 10) || 200;\n\n      this._getSuggestions(search.term.trim(), perPage, view.model, view._lookup).done(function (suggestions, exactMatches, moreResultsAvailable) {\n        view._pendingOperationsCount--;\n\n        if (view._pendingOperationsCount === 0) {\n          $loading.addClass('hidden');\n          $loading.removeClass('inlineblock');\n          $confirm.removeClass('hidden');\n        }\n\n        if (suggestions.length > 0) {\n          $shareWithField.autocomplete(\"option\", \"autoFocus\", true);\n          response(suggestions); // show a notice that the list is truncated\n          // this is the case if one of the search results is at least as long as the max result config option\n\n          if (moreResultsAvailable) {\n            var message = t('core', 'This list is maybe truncated - please refine your search term to see more results.');\n            $('.ui-autocomplete').append('<li class=\"autocomplete-note\">' + message + '</li>');\n          }\n        } else {\n          var title = t('core', 'No users or groups found for {search}', {\n            search: $shareWithField.val()\n          });\n\n          if (!view.configModel.get('allowGroupSharing')) {\n            title = t('core', 'No users found for {search}', {\n              search: $('.shareWithField').val()\n            });\n          }\n\n          $shareWithField.addClass('error').attr('data-original-title', title).tooltip('hide').tooltip({\n            placement: 'top',\n            trigger: 'manual'\n          }).tooltip('fixTitle').tooltip('show');\n          response();\n        }\n      }).fail(function (message) {\n        view._pendingOperationsCount--;\n\n        if (view._pendingOperationsCount === 0) {\n          $loading.addClass('hidden');\n          $loading.removeClass('inlineblock');\n          $confirm.removeClass('hidden');\n        }\n\n        if (message) {\n          OC.Notification.showTemporary(t('core', 'An error occurred (\"{message}\"). Please try again', {\n            message: message\n          }));\n        } else {\n          OC.Notification.showTemporary(t('core', 'An error occurred. Please try again'));\n        }\n      });\n    },\n    autocompleteRenderItem: function autocompleteRenderItem(ul, item) {\n      var icon = 'icon-user';\n      var text = escapeHTML(item.label);\n      var description = '';\n      var type = '';\n\n      var getTranslatedType = function getTranslatedType(type) {\n        switch (type) {\n          case 'HOME':\n            return t('core', 'Home');\n\n          case 'WORK':\n            return t('core', 'Work');\n\n          case 'OTHER':\n            return t('core', 'Other');\n\n          default:\n            return '' + type;\n        }\n      };\n\n      if (typeof item.type !== 'undefined' && item.type !== null) {\n        type = getTranslatedType(item.type) + ' ';\n      }\n\n      if (typeof item.name !== 'undefined') {\n        text = escapeHTML(item.name);\n      }\n\n      if (item.value.shareType === OC.Share.SHARE_TYPE_GROUP) {\n        icon = 'icon-contacts-dark';\n      } else if (item.value.shareType === OC.Share.SHARE_TYPE_REMOTE) {\n        icon = 'icon-shared';\n        description += item.value.shareWith;\n      } else if (item.value.shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n        text = t('core', '{sharee} (remote group)', {\n          sharee: text\n        }, undefined, {\n          escape: false\n        });\n        icon = 'icon-shared';\n        description += item.value.shareWith;\n      } else if (item.value.shareType === OC.Share.SHARE_TYPE_EMAIL) {\n        icon = 'icon-mail';\n        description += item.value.shareWith;\n      } else if (item.value.shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n        text = t('core', '{sharee} ({type}, {owner})', {\n          sharee: text,\n          type: item.value.circleInfo,\n          owner: item.value.circleOwner\n        }, undefined, {\n          escape: false\n        });\n        icon = 'icon-circle';\n      } else if (item.value.shareType === OC.Share.SHARE_TYPE_ROOM) {\n        icon = 'icon-talk';\n      }\n\n      var insert = $(\"<div class='share-autocomplete-item'/>\");\n\n      if (item.merged) {\n        insert.addClass('merged');\n        text = item.value.shareWith;\n        description = type;\n      } else if (item.lookup) {\n        text = item.label;\n        icon = false;\n        insert.append('<span class=\"icon icon-search search-globally\"></span>');\n      } else {\n        var avatar = $(\"<div class='avatardiv'></div>\").appendTo(insert);\n\n        if (item.value.shareType === OC.Share.SHARE_TYPE_USER || item.value.shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n          avatar.avatar(item.value.shareWith, 32, undefined, undefined, undefined, item.label);\n        } else {\n          if (typeof item.uuid === 'undefined') {\n            item.uuid = text;\n          }\n\n          avatar.imageplaceholder(item.uuid, text, 32);\n        }\n\n        description = type + description;\n      }\n\n      if (description !== '') {\n        insert.addClass('with-description');\n      }\n\n      $(\"<div class='autocomplete-item-text'></div>\").html(text.replace(new RegExp(this.term, \"gi\"), \"<span class='ui-state-highlight'>$&</span>\") + '<span class=\"autocomplete-item-details\">' + description + '</span>').appendTo(insert);\n      insert.attr('title', item.value.shareWith);\n\n      if (icon) {\n        insert.append('<span class=\"icon ' + icon + '\" title=\"' + text + '\"></span>');\n      }\n\n      insert = $(\"<a>\").append(insert);\n      return $(\"<li>\").addClass(item.value.shareType === OC.Share.SHARE_TYPE_GROUP ? 'group' : 'user').append(insert).appendTo(ul);\n    },\n    _onSelectRecipient: function _onSelectRecipient(e, s) {\n      var self = this;\n\n      if (e.keyCode == 9) {\n        e.preventDefault();\n\n        if (typeof s.item.name !== 'undefined') {\n          e.target.value = s.item.name;\n        } else {\n          e.target.value = s.item.label;\n        }\n\n        setTimeout(function () {\n          $(e.target).attr('disabled', false).autocomplete('search', $(e.target).val());\n        }, 0);\n        return false;\n      }\n\n      if (s.item.lookup) {\n        // Retrigger search but with global lookup this time\n        this._lookup = true;\n        var $shareWithField = this.$el.find('.shareWithField');\n        var val = $shareWithField.val();\n        setTimeout(function () {\n          console.debug('searching again, but globally. search term: ' + val);\n          $shareWithField.autocomplete(\"search\", val);\n        }, 0);\n        return false;\n      }\n\n      e.preventDefault(); // Ensure that the keydown handler for the input field is not\n      // called; otherwise it would try to add the recipient again, which\n      // would fail.\n\n      e.stopImmediatePropagation();\n      $(e.target).attr('disabled', true).val(s.item.label);\n      var $loading = this.$el.find('.shareWithLoading');\n      var $confirm = this.$el.find('.shareWithConfirm');\n      $loading.removeClass('hidden');\n      $loading.addClass('inlineblock');\n      $confirm.addClass('hidden');\n      this._pendingOperationsCount++;\n      this.model.addShare(s.item.value, {\n        success: function success() {\n          // Adding a share changes the suggestions.\n          self._lastSuggestions = undefined;\n          $(e.target).val('').attr('disabled', false);\n          self._pendingOperationsCount--;\n\n          if (self._pendingOperationsCount === 0) {\n            $loading.addClass('hidden');\n            $loading.removeClass('inlineblock');\n            $confirm.removeClass('hidden');\n          }\n        },\n        error: function error(obj, msg) {\n          OC.Notification.showTemporary(msg);\n          $(e.target).attr('disabled', false).autocomplete('search', $(e.target).val());\n          self._pendingOperationsCount--;\n\n          if (self._pendingOperationsCount === 0) {\n            $loading.addClass('hidden');\n            $loading.removeClass('inlineblock');\n            $confirm.removeClass('hidden');\n          }\n        }\n      });\n    },\n    _confirmShare: function _confirmShare() {\n      var self = this;\n      var $shareWithField = $('.shareWithField');\n      var $loading = this.$el.find('.shareWithLoading');\n      var $confirm = this.$el.find('.shareWithConfirm');\n      $loading.removeClass('hidden');\n      $loading.addClass('inlineblock');\n      $confirm.addClass('hidden');\n      this._pendingOperationsCount++;\n      $shareWithField.prop('disabled', true); // Disabling the autocompletion does not clear its search timeout;\n      // removing the focus from the input field does, but only if the\n      // autocompletion is not disabled when the field loses the focus.\n      // Thus, the field has to be disabled before disabling the\n      // autocompletion to prevent an old pending search result from\n      // appearing once the field is enabled again.\n\n      $shareWithField.autocomplete('close');\n      $shareWithField.autocomplete('disable');\n\n      var restoreUI = function restoreUI() {\n        self._pendingOperationsCount--;\n\n        if (self._pendingOperationsCount === 0) {\n          $loading.addClass('hidden');\n          $loading.removeClass('inlineblock');\n          $confirm.removeClass('hidden');\n        }\n\n        $shareWithField.prop('disabled', false);\n        $shareWithField.focus();\n      };\n\n      var perPage = parseInt(oc_config['sharing.maxAutocompleteResults'], 10) || 200;\n\n      this._getSuggestions($shareWithField.val(), perPage, this.model, this._lookup).done(function (suggestions, exactMatches) {\n        if (suggestions.length === 0) {\n          restoreUI();\n          $shareWithField.autocomplete('enable'); // There is no need to show an error message here; it will\n          // be automatically shown when the autocomplete is activated\n          // again (due to the focus on the field) and it finds no\n          // matches.\n\n          return;\n        }\n\n        if (exactMatches.length !== 1) {\n          restoreUI();\n          $shareWithField.autocomplete('enable');\n          return;\n        }\n\n        var actionSuccess = function actionSuccess() {\n          // Adding a share changes the suggestions.\n          self._lastSuggestions = undefined;\n          $shareWithField.val('');\n          restoreUI();\n          $shareWithField.autocomplete('enable');\n        };\n\n        var actionError = function actionError(obj, msg) {\n          restoreUI();\n          $shareWithField.autocomplete('enable');\n          OC.Notification.showTemporary(msg);\n        };\n\n        self.model.addShare(exactMatches[0].value, {\n          success: actionSuccess,\n          error: actionError\n        });\n      }).fail(function (message) {\n        restoreUI();\n        $shareWithField.autocomplete('enable'); // There is no need to show an error message here; it will be\n        // automatically shown when the autocomplete is activated again\n        // (due to the focus on the field) and getting the suggestions\n        // fail.\n      });\n    },\n    _toggleLoading: function _toggleLoading(state) {\n      this._loading = state;\n      this.$el.find('.subView').toggleClass('hidden', state);\n      this.$el.find('.loading').toggleClass('hidden', !state);\n    },\n    _onRequest: function _onRequest() {\n      // only show the loading spinner for the first request (for now)\n      if (!this._loadingOnce) {\n        this._toggleLoading(true);\n      }\n    },\n    _onEndRequest: function _onEndRequest() {\n      var self = this;\n\n      this._toggleLoading(false);\n\n      if (!this._loadingOnce) {\n        this._loadingOnce = true; // the first time, focus on the share field after the spinner disappeared\n\n        if (!OC.Util.isIE()) {\n          _.defer(function () {\n            self.$('.shareWithField').focus();\n          });\n        }\n      }\n    },\n    render: function render() {\n      var self = this;\n      var baseTemplate = OC.Share.Templates['sharedialogview'];\n      this.$el.html(baseTemplate({\n        cid: this.cid,\n        shareLabel: t('core', 'Share'),\n        sharePlaceholder: this._renderSharePlaceholderPart(),\n        isSharingAllowed: this.model.sharePermissionPossible()\n      }));\n      var $shareField = this.$el.find('.shareWithField');\n\n      if ($shareField.length) {\n        var shareFieldKeydownHandler = function shareFieldKeydownHandler(event) {\n          if (event.keyCode !== 13) {\n            return true;\n          }\n\n          self._confirmShare();\n\n          return false;\n        };\n\n        $shareField.autocomplete({\n          minLength: 0,\n          delay: 750,\n          focus: function focus(event) {\n            event.preventDefault();\n          },\n          source: this.autocompleteHandler,\n          select: this._onSelectRecipient,\n          open: function open() {\n            var autocomplete = $(this).autocomplete('widget');\n            var numberOfItems = autocomplete.find('li').size();\n            autocomplete.removeClass('item-count-1');\n            autocomplete.removeClass('item-count-2');\n\n            if (numberOfItems <= 2) {\n              autocomplete.addClass('item-count-' + numberOfItems);\n            }\n          }\n        }).data('ui-autocomplete')._renderItem = this.autocompleteRenderItem;\n        $shareField.on('keydown', null, shareFieldKeydownHandler);\n      }\n\n      this.resharerInfoView.$el = this.$el.find('.resharerInfoView');\n      this.resharerInfoView.render();\n      this.linkShareView.$el = this.$el.find('.linkShareView');\n      this.linkShareView.render();\n      this.shareeListView.$el = this.$el.find('.shareeListView');\n      this.shareeListView.render();\n      this.$el.find('.hasTooltip').tooltip();\n      return this;\n    },\n\n    /**\n     * sets whether share by link should be displayed or not. Default is\n     * true.\n     *\n     * @param {bool} showLink\n     */\n    setShowLink: function setShowLink(showLink) {\n      this._showLink = typeof showLink === 'boolean' ? showLink : true;\n      this.linkShareView.showLink = this._showLink;\n    },\n    _renderSharePlaceholderPart: function _renderSharePlaceholderPart() {\n      var allowRemoteSharing = this.configModel.get('isRemoteShareAllowed');\n      var allowMailSharing = this.configModel.get('isMailShareAllowed');\n\n      if (!allowRemoteSharing && allowMailSharing) {\n        return t('core', 'Name or email address...');\n      }\n\n      if (allowRemoteSharing && !allowMailSharing) {\n        return t('core', 'Name or federated cloud ID...');\n      }\n\n      if (allowRemoteSharing && allowMailSharing) {\n        return t('core', 'Name, federated cloud ID or email address...');\n      }\n\n      return t('core', 'Name...');\n    }\n  });\n  OC.Share.ShareDialogView = ShareDialogView;\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n    OC.Share.Types = {};\n  }\n  /**\n   * @typedef {object} OC.Share.Types.LinkShareInfo\n   * @property {string} token\n   * @property {bool} hideDownload\n   * @property {string|null} password\n   * @property {bool} sendPasswordByTalk\n   * @property {number} permissions\n   * @property {Date} expiration\n   * @property {number} stime share time\n   */\n\n  /**\n   * @typedef {object} OC.Share.Types.Reshare\n   * @property {string} uid_owner\n   * @property {number} share_type\n   * @property {string} share_with\n   * @property {string} displayname_owner\n   * @property {number} permissions\n   */\n\n  /**\n   * @typedef {object} OC.Share.Types.ShareInfo\n   * @property {number} share_type\n   * @property {number} permissions\n   * @property {number} file_source optional\n   * @property {number} item_source\n   * @property {string} token\n   * @property {string} share_with\n   * @property {string} share_with_displayname\n   * @property {string} share_with_avatar\n   * @property {string} mail_send\n   * @property {Date} expiration optional?\n   * @property {number} stime optional?\n   * @property {string} uid_owner\n   * @property {string} displayname_owner\n   */\n\n  /**\n   * @typedef {object} OC.Share.Types.ShareItemInfo\n   * @property {OC.Share.Types.Reshare} reshare\n   * @property {OC.Share.Types.ShareInfo[]} shares\n   * @property {OC.Share.Types.LinkShareInfo|undefined} linkShare\n   */\n\n  /**\n   * These properties are sometimes returned by the server as strings instead\n   * of integers, so we need to convert them accordingly...\n   */\n\n\n  var SHARE_RESPONSE_INT_PROPS = ['id', 'file_parent', 'mail_send', 'file_source', 'item_source', 'permissions', 'storage', 'share_type', 'parent', 'stime'];\n  /**\n   * @class OCA.Share.ShareItemModel\n   * @classdesc\n   *\n   * Represents the GUI of the share dialogue\n   *\n   * // FIXME: use OC Share API once #17143 is done\n   *\n   * // TODO: this really should be a collection of share item models instead,\n   * where the link share is one of them\n   */\n\n  var ShareItemModel = OC.Backbone.Model.extend({\n    /**\n     * share id of the link share, if applicable\n     */\n    _linkShareId: null,\n    initialize: function initialize(attributes, options) {\n      if (!_.isUndefined(options.configModel)) {\n        this.configModel = options.configModel;\n      }\n\n      if (!_.isUndefined(options.fileInfoModel)) {\n        /** @type {OC.Files.FileInfo} **/\n        this.fileInfoModel = options.fileInfoModel;\n      }\n\n      _.bindAll(this, 'addShare');\n    },\n    defaults: {\n      allowPublicUploadStatus: false,\n      permissions: 0,\n      linkShares: []\n    },\n\n    /**\n     * Saves the current link share information.\n     *\n     * This will trigger an ajax call and, if successful, refetch the model\n     * afterwards. Callbacks \"success\", \"error\" and \"complete\" can be given\n     * in the options object; \"success\" is called after a successful save\n     * once the model is refetch, \"error\" is called after a failed save, and\n     * \"complete\" is called both after a successful save and after a failed\n     * save. Note that \"complete\" is called before \"success\" and \"error\" are\n     * called (unlike in jQuery, in which it is called after them); this\n     * ensures that \"complete\" is called even if refetching the model fails.\n     *\n     * TODO: this should be a separate model\n     */\n    saveLinkShare: function saveLinkShare(attributes, options) {\n      options = options || {};\n      attributes = _.extend({}, attributes);\n      var shareId = null;\n      var call; // oh yeah...\n\n      if (attributes.expiration) {\n        attributes.expireDate = attributes.expiration;\n        delete attributes.expiration;\n      }\n\n      var linkShares = this.get('linkShares');\n\n      var shareIndex = _.findIndex(linkShares, function (share) {\n        return share.id === attributes.cid;\n      });\n\n      if (linkShares.length > 0 && shareIndex !== -1) {\n        shareId = linkShares[shareIndex].id; // note: update can only update a single value at a time\n\n        call = this.updateShare(shareId, attributes, options);\n      } else {\n        attributes = _.defaults(attributes, {\n          hideDownload: false,\n          password: '',\n          passwordChanged: false,\n          sendPasswordByTalk: false,\n          permissions: OC.PERMISSION_READ,\n          expireDate: this.configModel.getDefaultExpirationDateString(),\n          shareType: OC.Share.SHARE_TYPE_LINK\n        });\n        call = this.addShare(attributes, options);\n      }\n\n      return call;\n    },\n    addShare: function addShare(attributes, options) {\n      var shareType = attributes.shareType;\n      attributes = _.extend({}, attributes); // get default permissions\n\n      var defaultPermissions = OC.getCapabilities()['files_sharing']['default_permissions'] || OC.PERMISSION_ALL;\n      var possiblePermissions = OC.PERMISSION_READ;\n\n      if (this.updatePermissionPossible()) {\n        possiblePermissions = possiblePermissions | OC.PERMISSION_UPDATE;\n      }\n\n      if (this.createPermissionPossible()) {\n        possiblePermissions = possiblePermissions | OC.PERMISSION_CREATE;\n      }\n\n      if (this.deletePermissionPossible()) {\n        possiblePermissions = possiblePermissions | OC.PERMISSION_DELETE;\n      }\n\n      if (this.configModel.get('isResharingAllowed') && this.sharePermissionPossible()) {\n        possiblePermissions = possiblePermissions | OC.PERMISSION_SHARE;\n      }\n\n      attributes.permissions = defaultPermissions & possiblePermissions;\n\n      if (_.isUndefined(attributes.path)) {\n        attributes.path = this.fileInfoModel.getFullPath();\n      }\n\n      return this._addOrUpdateShare({\n        type: 'POST',\n        url: this._getUrl('shares'),\n        data: attributes,\n        dataType: 'json'\n      }, options);\n    },\n    updateShare: function updateShare(shareId, attrs, options) {\n      return this._addOrUpdateShare({\n        type: 'PUT',\n        url: this._getUrl('shares/' + encodeURIComponent(shareId)),\n        data: attrs,\n        dataType: 'json'\n      }, options);\n    },\n    _addOrUpdateShare: function _addOrUpdateShare(ajaxSettings, options) {\n      var self = this;\n      options = options || {};\n      return $.ajax(ajaxSettings).always(function () {\n        if (_.isFunction(options.complete)) {\n          options.complete(self);\n        }\n      }).done(function () {\n        self.fetch().done(function () {\n          if (_.isFunction(options.success)) {\n            options.success(self);\n          }\n        });\n      }).fail(function (xhr) {\n        var msg = t('core', 'Error');\n        var result = xhr.responseJSON;\n\n        if (result && result.ocs && result.ocs.meta) {\n          msg = result.ocs.meta.message;\n        }\n\n        if (_.isFunction(options.error)) {\n          options.error(self, msg);\n        } else {\n          OC.dialogs.alert(msg, t('core', 'Error while sharing'));\n        }\n      });\n    },\n\n    /**\n     * Deletes the share with the given id\n     *\n     * @param {int} shareId share id\n     * @return {jQuery}\n     */\n    removeShare: function removeShare(shareId, options) {\n      var self = this;\n      options = options || {};\n      return $.ajax({\n        type: 'DELETE',\n        url: this._getUrl('shares/' + encodeURIComponent(shareId))\n      }).done(function () {\n        self.fetch({\n          success: function success() {\n            if (_.isFunction(options.success)) {\n              options.success(self);\n            }\n          }\n        });\n      }).fail(function (xhr) {\n        var msg = t('core', 'Error');\n        var result = xhr.responseJSON;\n\n        if (result.ocs && result.ocs.meta) {\n          msg = result.ocs.meta.message;\n        }\n\n        if (_.isFunction(options.error)) {\n          options.error(self, msg);\n        } else {\n          OC.dialogs.alert(msg, t('core', 'Error removing share'));\n        }\n      });\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isPublicUploadAllowed: function isPublicUploadAllowed() {\n      return this.get('allowPublicUploadStatus');\n    },\n    isPublicEditingAllowed: function isPublicEditingAllowed() {\n      return this.get('allowPublicEditingStatus');\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isHideFileListSet: function isHideFileListSet() {\n      return this.get('hideFileListStatus');\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isFolder: function isFolder() {\n      return this.get('itemType') === 'folder';\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    isFile: function isFile() {\n      return this.get('itemType') === 'file';\n    },\n\n    /**\n     * whether this item has reshare information\n     * @returns {boolean}\n     */\n    hasReshare: function hasReshare() {\n      var reshare = this.get('reshare');\n      return _.isObject(reshare) && !_.isUndefined(reshare.uid_owner);\n    },\n\n    /**\n     * whether this item has user share information\n     * @returns {boolean}\n     */\n    hasUserShares: function hasUserShares() {\n      return this.getSharesWithCurrentItem().length > 0;\n    },\n\n    /**\n     * Returns whether this item has link shares\n     *\n     * @return {bool} true if a link share exists, false otherwise\n     */\n    hasLinkShares: function hasLinkShares() {\n      var linkShares = this.get('linkShares');\n\n      if (linkShares && linkShares.length > 0) {\n        return true;\n      }\n\n      return false;\n    },\n\n    /**\n     * @returns {string}\n     */\n    getReshareOwner: function getReshareOwner() {\n      return this.get('reshare').uid_owner;\n    },\n\n    /**\n     * @returns {string}\n     */\n    getReshareOwnerDisplayname: function getReshareOwnerDisplayname() {\n      return this.get('reshare').displayname_owner;\n    },\n\n    /**\n     * @returns {string}\n     */\n    getReshareNote: function getReshareNote() {\n      return this.get('reshare').note;\n    },\n\n    /**\n     * @returns {string}\n     */\n    getReshareWith: function getReshareWith() {\n      return this.get('reshare').share_with;\n    },\n\n    /**\n     * @returns {string}\n     */\n    getReshareWithDisplayName: function getReshareWithDisplayName() {\n      var reshare = this.get('reshare');\n      return reshare.share_with_displayname || reshare.share_with;\n    },\n\n    /**\n     * @returns {number}\n     */\n    getReshareType: function getReshareType() {\n      return this.get('reshare').share_type;\n    },\n    getExpireDate: function getExpireDate(shareIndex) {\n      return this._shareExpireDate(shareIndex);\n    },\n    getNote: function getNote(shareIndex) {\n      return this._shareNote(shareIndex);\n    },\n\n    /**\n     * Returns all share entries that only apply to the current item\n     * (file/folder)\n     *\n     * @return {Array.<OC.Share.Types.ShareInfo>}\n     */\n    getSharesWithCurrentItem: function getSharesWithCurrentItem() {\n      var shares = this.get('shares') || [];\n      var fileId = this.fileInfoModel.get('id');\n      return _.filter(shares, function (share) {\n        return share.item_source === fileId;\n      });\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getShareWith: function getShareWith(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.share_with;\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getShareWithDisplayName: function getShareWithDisplayName(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.share_with_displayname;\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getShareWithAvatar: function getShareWithAvatar(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.share_with_avatar;\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getSharedBy: function getSharedBy(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.uid_owner;\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getSharedByDisplayName: function getSharedByDisplayName(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.displayname_owner;\n    },\n\n    /**\n     * @param shareIndex\n     * @returns {string}\n     */\n    getFileOwnerUid: function getFileOwnerUid(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.uid_file_owner;\n    },\n\n    /**\n     * returns the array index of a sharee for a provided shareId\n     *\n     * @param shareId\n     * @returns {number}\n     */\n    findShareWithIndex: function findShareWithIndex(shareId) {\n      var shares = this.get('shares');\n\n      if (!_.isArray(shares)) {\n        throw \"Unknown Share\";\n      }\n\n      for (var i = 0; i < shares.length; i++) {\n        var shareWith = shares[i];\n\n        if (shareWith.id === shareId) {\n          return i;\n        }\n      }\n\n      throw \"Unknown Sharee\";\n    },\n    getShareType: function getShareType(shareIndex) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.share_type;\n    },\n\n    /**\n     * whether a share from shares has the requested permission\n     *\n     * @param {number} shareIndex\n     * @param {number} permission\n     * @returns {boolean}\n     * @private\n     */\n    _shareHasPermission: function _shareHasPermission(shareIndex, permission) {\n      /** @type OC.Share.Types.ShareInfo **/\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return (share.permissions & permission) === permission;\n    },\n    _shareExpireDate: function _shareExpireDate(shareIndex) {\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      var date2 = share.expiration;\n      return date2;\n    },\n    _shareNote: function _shareNote(shareIndex) {\n      var share = this.get('shares')[shareIndex];\n\n      if (!_.isObject(share)) {\n        throw \"Unknown Share\";\n      }\n\n      return share.note;\n    },\n\n    /**\n     * @return {int}\n     */\n    getPermissions: function getPermissions() {\n      return this.get('permissions');\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    sharePermissionPossible: function sharePermissionPossible() {\n      return (this.get('permissions') & OC.PERMISSION_SHARE) === OC.PERMISSION_SHARE;\n    },\n\n    /**\n     * @param {number} shareIndex\n     * @returns {boolean}\n     */\n    hasSharePermission: function hasSharePermission(shareIndex) {\n      return this._shareHasPermission(shareIndex, OC.PERMISSION_SHARE);\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    createPermissionPossible: function createPermissionPossible() {\n      return (this.get('permissions') & OC.PERMISSION_CREATE) === OC.PERMISSION_CREATE;\n    },\n\n    /**\n     * @param {number} shareIndex\n     * @returns {boolean}\n     */\n    hasCreatePermission: function hasCreatePermission(shareIndex) {\n      return this._shareHasPermission(shareIndex, OC.PERMISSION_CREATE);\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    updatePermissionPossible: function updatePermissionPossible() {\n      return (this.get('permissions') & OC.PERMISSION_UPDATE) === OC.PERMISSION_UPDATE;\n    },\n\n    /**\n     * @param {number} shareIndex\n     * @returns {boolean}\n     */\n    hasUpdatePermission: function hasUpdatePermission(shareIndex) {\n      return this._shareHasPermission(shareIndex, OC.PERMISSION_UPDATE);\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    deletePermissionPossible: function deletePermissionPossible() {\n      return (this.get('permissions') & OC.PERMISSION_DELETE) === OC.PERMISSION_DELETE;\n    },\n\n    /**\n     * @param {number} shareIndex\n     * @returns {boolean}\n     */\n    hasDeletePermission: function hasDeletePermission(shareIndex) {\n      return this._shareHasPermission(shareIndex, OC.PERMISSION_DELETE);\n    },\n    hasReadPermission: function hasReadPermission(shareIndex) {\n      return this._shareHasPermission(shareIndex, OC.PERMISSION_READ);\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    editPermissionPossible: function editPermissionPossible() {\n      return this.createPermissionPossible() || this.updatePermissionPossible() || this.deletePermissionPossible();\n    },\n\n    /**\n     * @returns {string}\n     *     The state that the 'can edit' permission checkbox should have.\n     *     Possible values:\n     *     - empty string: no permission\n     *     - 'checked': all applicable permissions\n     *     - 'indeterminate': some but not all permissions\n     */\n    editPermissionState: function editPermissionState(shareIndex) {\n      var hcp = this.hasCreatePermission(shareIndex);\n      var hup = this.hasUpdatePermission(shareIndex);\n      var hdp = this.hasDeletePermission(shareIndex);\n\n      if (this.isFile()) {\n        if (hcp || hup || hdp) {\n          return 'checked';\n        }\n\n        return '';\n      }\n\n      if (!hcp && !hup && !hdp) {\n        return '';\n      }\n\n      if (this.createPermissionPossible() && !hcp || this.updatePermissionPossible() && !hup || this.deletePermissionPossible() && !hdp) {\n        return 'indeterminate';\n      }\n\n      return 'checked';\n    },\n\n    /**\n     * @returns {int}\n     */\n    linkSharePermissions: function linkSharePermissions(shareId) {\n      var linkShares = this.get('linkShares');\n\n      var shareIndex = _.findIndex(linkShares, function (share) {\n        return share.id === shareId;\n      });\n\n      if (!this.hasLinkShares()) {\n        return -1;\n      } else if (linkShares.length > 0 && shareIndex !== -1) {\n        return linkShares[shareIndex].permissions;\n      }\n\n      return -1;\n    },\n    _getUrl: function _getUrl(base, params) {\n      params = _.extend({\n        format: 'json'\n      }, params || {});\n      return OC.linkToOCS('apps/files_sharing/api/v1', 2) + base + '?' + OC.buildQueryString(params);\n    },\n    _fetchShares: function _fetchShares() {\n      var path = this.fileInfoModel.getFullPath();\n      return $.ajax({\n        type: 'GET',\n        url: this._getUrl('shares', {\n          path: path,\n          reshares: true\n        })\n      });\n    },\n    _fetchReshare: function _fetchReshare() {\n      // only fetch original share once\n      if (!this._reshareFetched) {\n        var path = this.fileInfoModel.getFullPath();\n        this._reshareFetched = true;\n        return $.ajax({\n          type: 'GET',\n          url: this._getUrl('shares', {\n            path: path,\n            shared_with_me: true\n          })\n        });\n      } else {\n        return $.Deferred().resolve([{\n          ocs: {\n            data: [this.get('reshare')]\n          }\n        }]);\n      }\n    },\n\n    /**\n     * Group reshares into a single super share element.\n     * Does this by finding the most precise share and\n     * combines the permissions to be the most permissive.\n     *\n     * @param {Array} reshares\n     * @return {Object} reshare\n     */\n    _groupReshares: function _groupReshares(reshares) {\n      if (!reshares || !reshares.length) {\n        return false;\n      }\n\n      var superShare = reshares.shift();\n      var combinedPermissions = superShare.permissions;\n\n      _.each(reshares, function (reshare) {\n        // use share have higher priority than group share\n        if (reshare.share_type === OC.Share.SHARE_TYPE_USER && superShare.share_type === OC.Share.SHARE_TYPE_GROUP) {\n          superShare = reshare;\n        }\n\n        combinedPermissions |= reshare.permissions;\n      });\n\n      superShare.permissions = combinedPermissions;\n      return superShare;\n    },\n    fetch: function fetch(options) {\n      var model = this;\n      this.trigger('request', this);\n      var deferred = $.when(this._fetchShares(), this._fetchReshare());\n      deferred.done(function (data1, data2) {\n        model.trigger('sync', 'GET', this);\n        var sharesMap = {};\n\n        _.each(data1[0].ocs.data, function (shareItem) {\n          sharesMap[shareItem.id] = shareItem;\n        });\n\n        var reshare = false;\n\n        if (data2[0].ocs.data.length) {\n          reshare = model._groupReshares(data2[0].ocs.data);\n        }\n\n        model.set(model.parse({\n          shares: sharesMap,\n          reshare: reshare\n        }));\n\n        if (!_.isUndefined(options) && _.isFunction(options.success)) {\n          options.success();\n        }\n      });\n      return deferred;\n    },\n\n    /**\n     * Updates OC.Share.itemShares and OC.Share.statuses.\n     *\n     * This is required in case the user navigates away and comes back,\n     * the share statuses from the old arrays are still used to fill in the icons\n     * in the file list.\n     */\n    _legacyFillCurrentShares: function _legacyFillCurrentShares(shares) {\n      var fileId = this.fileInfoModel.get('id');\n\n      if (!shares || !shares.length) {\n        delete OC.Share.statuses[fileId];\n        OC.Share.currentShares = {};\n        OC.Share.itemShares = [];\n        return;\n      }\n\n      var currentShareStatus = OC.Share.statuses[fileId];\n\n      if (!currentShareStatus) {\n        currentShareStatus = {\n          link: false\n        };\n        OC.Share.statuses[fileId] = currentShareStatus;\n      }\n\n      currentShareStatus.link = false;\n      OC.Share.currentShares = {};\n      OC.Share.itemShares = [];\n\n      _.each(shares,\n      /**\n       * @param {OC.Share.Types.ShareInfo} share\n       */\n      function (share) {\n        if (share.share_type === OC.Share.SHARE_TYPE_LINK) {\n          OC.Share.itemShares[share.share_type] = true;\n          currentShareStatus.link = true;\n        } else {\n          if (!OC.Share.itemShares[share.share_type]) {\n            OC.Share.itemShares[share.share_type] = [];\n          }\n\n          OC.Share.itemShares[share.share_type].push(share.share_with);\n        }\n      });\n    },\n    parse: function parse(data) {\n      if (data === false) {\n        console.warn('no data was returned');\n        this.trigger('fetchError');\n        return {};\n      }\n\n      var permissions = this.fileInfoModel.get('permissions');\n\n      if (!_.isUndefined(data.reshare) && !_.isUndefined(data.reshare.permissions) && data.reshare.uid_owner !== OC.currentUser) {\n        permissions = permissions & data.reshare.permissions;\n      }\n\n      var allowPublicUploadStatus = false;\n\n      if (!_.isUndefined(data.shares)) {\n        $.each(data.shares, function (key, value) {\n          if (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n            allowPublicUploadStatus = value.permissions & OC.PERMISSION_CREATE ? true : false;\n            return true;\n          }\n        });\n      }\n\n      var allowPublicEditingStatus = true;\n\n      if (!_.isUndefined(data.shares)) {\n        $.each(data.shares, function (key, value) {\n          if (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n            allowPublicEditingStatus = value.permissions & OC.PERMISSION_UPDATE ? true : false;\n            return true;\n          }\n        });\n      }\n\n      var hideFileListStatus = false;\n\n      if (!_.isUndefined(data.shares)) {\n        $.each(data.shares, function (key, value) {\n          if (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n            hideFileListStatus = value.permissions & OC.PERMISSION_READ ? false : true;\n            return true;\n          }\n        });\n      }\n      /** @type {OC.Share.Types.ShareInfo[]} **/\n\n\n      var shares = _.map(data.shares, function (share) {\n        // properly parse some values because sometimes the server\n        // returns integers as string...\n        var i;\n\n        for (i = 0; i < SHARE_RESPONSE_INT_PROPS.length; i++) {\n          var prop = SHARE_RESPONSE_INT_PROPS[i];\n\n          if (!_.isUndefined(share[prop])) {\n            share[prop] = parseInt(share[prop], 10);\n          }\n        }\n\n        return share;\n      });\n\n      this._legacyFillCurrentShares(shares);\n\n      var linkShares = []; // filter out the share by link\n\n      shares = _.reject(shares,\n      /**\n       * @param {OC.Share.Types.ShareInfo} share\n       */\n      function (share) {\n        var isShareLink = share.share_type === OC.Share.SHARE_TYPE_LINK && (share.file_source === this.get('itemSource') || share.item_source === this.get('itemSource'));\n\n        if (isShareLink) {\n          /**\n           * Ignore reshared link shares for now\n           * FIXME: Find a way to display properly\n           */\n          if (share.uid_owner !== OC.currentUser) {\n            return;\n          }\n\n          var link = window.location.protocol + '//' + window.location.host;\n\n          if (!share.token) {\n            // pre-token link\n            var fullPath = this.fileInfoModel.get('path') + '/' + this.fileInfoModel.get('name');\n            var location = '/' + OC.currentUser + '/files' + fullPath;\n            var type = this.fileInfoModel.isDirectory() ? 'folder' : 'file';\n            link += OC.linkTo('', 'public.php') + '?service=files&' + type + '=' + encodeURIComponent(location);\n          } else {\n            link += OC.generateUrl('/s/') + share.token;\n          }\n\n          linkShares.push(_.extend({}, share, {\n            // hide_download is returned as an int, so force it\n            // to a boolean\n            hideDownload: !!share.hide_download,\n            password: share.share_with,\n            sendPasswordByTalk: share.send_password_by_talk\n          }));\n          return share;\n        }\n      }, this);\n      return {\n        reshare: data.reshare,\n        shares: shares,\n        linkShares: linkShares,\n        permissions: permissions,\n        allowPublicUploadStatus: allowPublicUploadStatus,\n        allowPublicEditingStatus: allowPublicEditingStatus,\n        hideFileListStatus: hideFileListStatus\n      };\n    },\n\n    /**\n     * Parses a string to an valid integer (unix timestamp)\n     * @param time\n     * @returns {*}\n     * @internal Only used to work around a bug in the backend\n     */\n    _parseTime: function _parseTime(time) {\n      if (_.isString(time)) {\n        // skip empty strings and hex values\n        if (time === '' || time.length > 1 && time[0] === '0' && time[1] === 'x') {\n          return null;\n        }\n\n        time = parseInt(time, 10);\n\n        if (isNaN(time)) {\n          time = null;\n        }\n      }\n\n      return time;\n    },\n\n    /**\n     * Returns a list of share types from the existing shares.\n     *\n     * @return {Array.<int>} array of share types\n     */\n    getShareTypes: function getShareTypes() {\n      var result;\n      result = _.pluck(this.getSharesWithCurrentItem(), 'share_type');\n\n      if (this.hasLinkShares()) {\n        result.push(OC.Share.SHARE_TYPE_LINK);\n      }\n\n      return _.uniq(result);\n    }\n  });\n  OC.Share.ShareItemModel = ShareItemModel;\n})();","/**\n * @copyright 2017, Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n(function () {\n  if (!OC.Share) {\n    OC.Share = {};\n  }\n\n  OC.Share.Social = {};\n  var SocialModel = OC.Backbone.Model.extend({\n    defaults: {\n      /** used for sorting social buttons */\n      key: null,\n\n      /** url to open, {{reference}} will be replaced with the link */\n      url: null,\n\n      /** Name to show in the tooltip */\n      name: null,\n\n      /** Icon class to display */\n      iconClass: null,\n\n      /** Open in new windows */\n      newWindow: true\n    }\n  });\n  OC.Share.Social.Model = SocialModel;\n  var SocialCollection = OC.Backbone.Collection.extend({\n    model: OC.Share.Social.Model,\n    comparator: 'key'\n  });\n  OC.Share.Social.Collection = new SocialCollection();\n})();","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n(function () {\n  var template = Handlebars.template,\n      templates = OC.Share.Templates = OC.Share.Templates || {};\n  templates['sharedialoglinkshareview'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {};\n      return \"<ul class=\\\"shareWithList\\\">\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.nolinkShares : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(2, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + ((stack1 = helpers.each.call(alias1, depth0 != null ? depth0.linkShares : depth0, {\n        \"name\": \"each\",\n        \"hash\": {},\n        \"fn\": container.program(7, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"</ul>\\n\";\n    },\n    \"2\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t<li data-share-id=\\\"\" + alias4((helper = (helper = helpers.newShareId || (depth0 != null ? depth0.newShareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"newShareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t<div class=\\\"avatar icon-public-white\\\"></div>\\n\t\t\t<span class=\\\"username\\\">\" + alias4((helper = (helper = helpers.newShareLabel || (depth0 != null ? depth0.newShareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"newShareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<div class=\\\"share-menu\\\">\\n\t\t\t\t\t<a href=\\\"#\\\" class=\\\"icon icon-add new-share has-tooltip \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" title=\\\"\" + alias4((helper = (helper = helpers.newShareTitle || (depth0 != null ? depth0.newShareTitle : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"newShareTitle\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"></a>\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\"></span>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t\t\t</div>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n    },\n    \"3\": function _(container, depth0, helpers, partials, data) {\n      return \"hidden\";\n    },\n    \"5\": function _(container, depth0, helpers, partials, data) {\n      var stack1, helper;\n      return \"\t\t\t\t\t\t\" + ((stack1 = (helper = (helper = helpers.pendingPopoverMenu || (depth0 != null ? depth0.pendingPopoverMenu : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"pendingPopoverMenu\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \"\\n\";\n    },\n    \"7\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t<li data-share-id=\\\"\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t<div class=\\\"avatar icon-public-white\\\"></div>\\n\t\t\t<span class=\\\"username\\\" title=\\\"\" + alias4((helper = (helper = helpers.linkShareCreationDate || (depth0 != null ? depth0.linkShareCreationDate : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"linkShareCreationDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.linkShareLabel || (depth0 != null ? depth0.linkShareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"linkShareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"clipboard-button icon icon-clippy has-tooltip\\\" data-clipboard-text=\\\"\" + alias4((helper = (helper = helpers.shareLinkURL || (depth0 != null ? depth0.shareLinkURL : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareLinkURL\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" title=\\\"\" + alias4((helper = (helper = helpers.copyLabel || (depth0 != null ? depth0.copyLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"copyLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"></a>\\n\t\t\t\t<div class=\\\"share-menu\\\">\\n\t\t\t\t\t<a href=\\\"#\\\" class=\\\"icon icon-more \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\"></a>\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\"></span>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.showPending : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.program(8, data, 0),\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t\t\t</div>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n    },\n    \"8\": function _(container, depth0, helpers, partials, data) {\n      var stack1, helper;\n      return \"\t\t\t\t\t\t\" + ((stack1 = (helper = (helper = helpers.popoverMenu || (depth0 != null ? depth0.popoverMenu : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"popoverMenu\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \"\\n\";\n    },\n    \"10\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.noSharingPlaceholder : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(11, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\";\n    },\n    \"11\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"<input id=\\\"shareWith-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"shareWithField\\\" type=\\\"text\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.noSharingPlaceholder || (depth0 != null ? depth0.noSharingPlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"noSharingPlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" disabled=\\\"disabled\\\" />\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.shareAllowed : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.program(10, data, 0),\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialoglinkshareview_popover_menu'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\" + alias4((helper = (helper = helpers.publicUploadRValue || (depth0 != null ? depth0.publicUploadRValue : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRValue\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" id=\\\"sharingDialogAllowPublicUpload-r-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"radio publicUploadRadio\\\" \" + ((stack1 = (helper = (helper = helpers.publicUploadRChecked || (depth0 != null ? depth0.publicUploadRChecked : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRChecked\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-r-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.publicUploadRLabel || (depth0 != null ? depth0.publicUploadRLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\" + alias4((helper = (helper = helpers.publicUploadRWValue || (depth0 != null ? depth0.publicUploadRWValue : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRWValue\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" id=\\\"sharingDialogAllowPublicUpload-rw-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"radio publicUploadRadio\\\" \" + ((stack1 = (helper = (helper = helpers.publicUploadRWChecked || (depth0 != null ? depth0.publicUploadRWChecked : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRWChecked\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-rw-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.publicUploadRWLabel || (depth0 != null ? depth0.publicUploadRWLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadRWLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\" + alias4((helper = (helper = helpers.publicUploadWValue || (depth0 != null ? depth0.publicUploadWValue : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadWValue\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" id=\\\"sharingDialogAllowPublicUpload-w-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"radio publicUploadRadio\\\" \" + ((stack1 = (helper = (helper = helpers.publicUploadWChecked || (depth0 != null ? depth0.publicUploadWChecked : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadWChecked\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-w-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.publicUploadWLabel || (depth0 != null ? depth0.publicUploadWLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicUploadWLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n    },\n    \"3\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li id=\\\"allowPublicEditingWrapper\\\">\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"allowPublicEditing\\\" id=\\\"sharingDialogAllowPublicEditing-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"checkbox publicEditingCheckbox\\\" \" + ((stack1 = (helper = (helper = helpers.publicEditingChecked || (depth0 != null ? depth0.publicEditingChecked : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicEditingChecked\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicEditing-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.publicEditingLabel || (depth0 != null ? depth0.publicEditingLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"publicEditingLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n    },\n    \"5\": function _(container, depth0, helpers, partials, data) {\n      return \"checked=\\\"checked\\\"\";\n    },\n    \"7\": function _(container, depth0, helpers, partials, data) {\n      return \"disabled=\\\"disabled\\\"\";\n    },\n    \"9\": function _(container, depth0, helpers, partials, data) {\n      return \"hidden\";\n    },\n    \"11\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"shareOption menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"passwordByTalk\\\" id=\\\"passwordByTalk-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"checkbox passwordByTalkCheckbox\\\"\\n\t\t\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordByTalkSet : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"passwordByTalk-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordByTalkLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n    },\n    \"13\": function _(container, depth0, helpers, partials, data) {\n      return \"datepicker\";\n    },\n    \"15\": function _(container, depth0, helpers, partials, data) {\n      var helper;\n      return container.escapeExpression((helper = (helper = helpers.expireDate || (depth0 != null ? depth0.expireDate : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"expireDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper));\n    },\n    \"17\": function _(container, depth0, helpers, partials, data) {\n      var helper;\n      return container.escapeExpression((helper = (helper = helpers.defaultExpireDate || (depth0 != null ? depth0.defaultExpireDate : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"defaultExpireDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper));\n    },\n    \"19\": function _(container, depth0, helpers, partials, data) {\n      return \"readonly\";\n    },\n    \"21\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li>\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"menuitem pop-up\\\" data-url=\\\"\" + alias4((helper = (helper = helpers.url || (depth0 != null ? depth0.url : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"url\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-window=\\\"\" + alias4((helper = (helper = helpers.newWindow || (depth0 != null ? depth0.newWindow : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"newWindow\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t\t\t<span class=\\\"icon \" + alias4((helper = (helper = helpers.iconClass || (depth0 != null ? depth0.iconClass : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"iconClass\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"></span>\\n\t\t\t\t\t<span>\" + alias4((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"label\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t\t</a>\\n\t\t\t</li>\\n\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"<div class=\\\"popovermenu menu\\\">\\n\t<ul>\\n\t\t<li class=\\\"hidden linkTextMenu\\\">\\n\t\t\t<span class=\\\"menuitem icon-link-text\\\">\\n\t\t\t\t<input id=\\\"linkText-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"linkText\\\" type=\\\"text\\\" readonly=\\\"readonly\\\" value=\\\"\" + alias4((helper = (helper = helpers.shareLinkURL || (depth0 != null ? depth0.shareLinkURL : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareLinkURL\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.publicUpload : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.publicEditing : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"hideDownload\\\" id=\\\"sharingDialogHideDownload-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"checkbox hideDownloadCheckbox\\\"\\n\t\t\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hideDownload : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogHideDownload-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.hideDownloadLabel || (depth0 != null ? depth0.hideDownloadLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"hideDownloadLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"showPassword\\\" id=\\\"showPassword-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"checkbox showPasswordCheckbox\\\"\\n\t\t\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordSet : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordEnforced : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(7, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" value=\\\"1\\\" />\\n\t\t\t\t\t<label for=\\\"showPassword-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.enablePasswordLabel || (depth0 != null ? depth0.enablePasswordLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"enablePasswordLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"\" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.isPasswordSet : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(9, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" linkPassMenu\\\">\\n\t\t\t\t<span class=\\\"menuitem icon-share-pass\\\">\\n\t\t\t\t\t<input id=\\\"linkPassText-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"linkPassText\\\" type=\\\"password\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordPlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-pass-submit\\\" value=\\\"\\\" />\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small hidden\\\"></span>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.showPasswordByTalkCheckBox : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(11, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t<li>\\n\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t<input id=\\\"expireDate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"expirationDate\\\" class=\\\"expireDate checkbox\\\"\\n\t\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isExpirationEnforced : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(7, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" />\\n\t\t\t\t<label for=\\\"expireDate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.expireDateLabel || (depth0 != null ? depth0.expireDateLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expireDateLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t</span>\\n\t\t</li>\\n\t\t<li class=\\\"\" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(9, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t<span class=\\\"menuitem icon-expiredate expirationDateContainer-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t\t<label for=\\\"expirationDatePicker-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\" + alias4((helper = (helper = helpers.expirationDate || (depth0 != null ? depth0.expirationDate : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.expirationLabel || (depth0 != null ? depth0.expirationLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t<!-- do not use the datepicker if enforced -->\\n\t\t\t\t<input id=\\\"expirationDatePicker-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"\" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.isExpirationEnforced : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(13, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" type=\\\"text\\\"\\n\t\t\t\t\tplaceholder=\\\"\" + alias4((helper = (helper = helpers.expirationDatePlaceholder || (depth0 != null ? depth0.expirationDatePlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationDatePlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" value=\\\"\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(15, data, 0),\n        \"inverse\": container.program(17, data, 0),\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\"\\n\t\t\t\t\tdata-max-date=\\\"\" + alias4((helper = (helper = helpers.maxDate || (depth0 != null ? depth0.maxDate : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"maxDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isExpirationEnforced : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(19, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" />\\n\t\t\t</span>\\n\t\t\t</li>\\n\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"share-add\\\">\\n\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t<span class=\\\"icon icon-edit\\\"></span>\\n\t\t\t\t<span>\" + alias4((helper = (helper = helpers.addNoteLabel || (depth0 != null ? depth0.addNoteLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"addNoteLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t\t<input type=\\\"button\\\" class=\\\"share-note-delete icon-delete \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasNote : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(9, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t</a>\\n\t\t</li>\\n\t\t<li class=\\\"share-note-form share-note-link \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasNote : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(9, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t<span class=\\\"menuitem icon-note\\\">\\n\t\t\t\t<textarea class=\\\"share-note\\\">\" + alias4((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareNote\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</textarea>\\n\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-note-submit\\\" value=\\\"\\\" id=\\\"add-note-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\" + ((stack1 = helpers.each.call(alias1, depth0 != null ? depth0.social : depth0, {\n        \"name\": \"each\",\n        \"hash\": {},\n        \"fn\": container.program(21, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span>\" + alias4((helper = (helper = helpers.unshareLinkLabel || (depth0 != null ? depth0.unshareLinkLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"unshareLinkLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span></a>\\n\t\t</li>\\n\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"new-share\\\">\\n\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t<span class=\\\"icon icon-add\\\"></span>\\n\t\t\t\t<span>\" + alias4((helper = (helper = helpers.newShareLabel || (depth0 != null ? depth0.newShareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"newShareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t</a>\\n\t\t</li>\\n\t</ul>\\n</div>\\n\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialoglinkshareview_popover_menu_pending'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem icon-info\\\">\\n\t\t\t\t\t<p>\" + alias4((helper = (helper = helpers.enforcedPasswordLabel || (depth0 != null ? depth0.enforcedPasswordLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"enforcedPasswordLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</p>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"linkPassMenu\\\">\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<form autocomplete=\\\"off\\\" class=\\\"enforcedPassForm\\\">\\n\t\t\t\t\t\t<input id=\\\"enforcedPassText\\\" required class=\\\"enforcedPassText\\\" type=\\\"password\\\"\\n\t\t\t\t\t\t\tplaceholder=\\\"\" + alias4((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordPlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" autocomplete=\\\"enforcedPassText\\\" minlength=\\\"\" + alias4((helper = (helper = helpers.minPasswordLength || (depth0 != null ? depth0.minPasswordLength : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"minPasswordLength\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t\t\t\t\t<input type=\\\"submit\\\" value=\\\" \\\" class=\\\"primary icon-checkmark-white\\\">\\n\t\t\t\t\t</form>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1;\n      return \"<div class=\\\"popovermenu open menu pending\\\">\\n\t<ul>\\n\" + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isPasswordEnforced : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t</ul>\\n</div>\\n\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialogresharerinfoview'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var helper;\n      return \"<div class=\\\"share-note\\\">\" + container.escapeExpression((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"shareNote\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</div>\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"<span class=\\\"reshare\\\">\\n\t<div class=\\\"avatar\\\" data-userName=\\\"\" + alias4((helper = (helper = helpers.reshareOwner || (depth0 != null ? depth0.reshareOwner : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"reshareOwner\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"></div>\\n\t\" + alias4((helper = (helper = helpers.sharedByText || (depth0 != null ? depth0.sharedByText : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"sharedByText\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\n</span>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasShareNote : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialogshareelistview'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers.unless.call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isShareWithCurrentUser : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(2, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"2\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t<li data-share-id=\\\"\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-share-type=\\\"\" + alias4((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareType\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-share-with=\\\"\" + alias4((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWith\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t<div class=\\\"avatar \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.modSeed : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" data-username=\\\"\" + alias4((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWith\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-avatar=\\\"\" + alias4((helper = (helper = helpers.shareWithAvatar || (depth0 != null ? depth0.shareWithAvatar : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWithAvatar\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-displayname=\\\"\" + alias4((helper = (helper = helpers.shareWithDisplayName || (depth0 != null ? depth0.shareWithDisplayName : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWithDisplayName\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.modSeed : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(5, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"></div>\\n\t\t\t<span class=\\\"username\\\" title=\\\"\" + alias4((helper = (helper = helpers.shareWithTitle || (depth0 != null ? depth0.shareWithTitle : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWithTitle\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.shareWithDisplayName || (depth0 != null ? depth0.shareWithDisplayName : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWithDisplayName\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.canUpdateShareSettings : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(7, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t</li>\\n\";\n    },\n    \"3\": function _(container, depth0, helpers, partials, data) {\n      return \"imageplaceholderseed\";\n    },\n    \"5\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"data-seed=\\\"\" + alias4((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareWith\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" \" + alias4((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareType\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"\";\n    },\n    \"7\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {};\n      return \"\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.editPermissionPossible : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(8, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t\t\t<div tabindex=\\\"0\\\" class=\\\"share-menu\\\"><span class=\\\"icon icon-more\\\"></span>\\n\t\t\t\t\t\" + ((stack1 = (helper = (helper = helpers.popoverMenu || (depth0 != null ? depth0.popoverMenu : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(alias1, {\n        \"name\": \"popoverMenu\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) != null ? stack1 : \"\") + \"\\n\t\t\t\t</div>\\n\t\t\t</span>\\n\";\n    },\n    \"8\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t\t\t<span>\\n\t\t\t\t\t\t<input id=\\\"canEdit-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"edit\\\" class=\\\"permissions checkbox\\\" />\\n\t\t\t\t\t\t<label for=\\\"canEdit-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.canEditLabel || (depth0 != null ? depth0.canEditLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"canEditLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\";\n    },\n    \"10\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t<li data-share-id=\\\"\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" data-share-type=\\\"\" + alias4((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareType\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\\n\t\t\t<div class=\\\"avatar\\\" data-username=\\\"\" + alias4((helper = (helper = helpers.shareInitiator || (depth0 != null ? depth0.shareInitiator : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareInitiator\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"></div>\\n\t\t\t<span class=\\\"has-tooltip username\\\" title=\\\"\" + alias4((helper = (helper = helpers.shareInitiator || (depth0 != null ? depth0.shareInitiator : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareInitiator\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.shareInitiatorText || (depth0 != null ? depth0.shareInitiatorText : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareInitiatorText\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span class=\\\"hidden-visually\\\">\" + alias4((helper = (helper = helpers.unshareLabel || (depth0 != null ? depth0.unshareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"unshareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span></a>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {};\n      return \"<ul id=\\\"shareWithList\\\" class=\\\"shareWithList\\\">\\n\" + ((stack1 = helpers.each.call(alias1, depth0 != null ? depth0.sharees : depth0, {\n        \"name\": \"each\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + ((stack1 = helpers.each.call(alias1, depth0 != null ? depth0.linkReshares : depth0, {\n        \"name\": \"each\",\n        \"hash\": {},\n        \"fn\": container.program(10, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"</ul>\\n\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialogshareelistview_popover_menu'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return \" \" + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.sharePermissionPossible : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(2, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" \";\n    },\n    \"2\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return \" \" + ((stack1 = helpers.unless.call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isMailShare : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(3, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" \";\n    },\n    \"3\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input id=\\\"canShare-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"share\\\" class=\\\"permissions checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasSharePermission : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" data-permissions=\\\"\" + alias4((helper = (helper = helpers.sharePermission || (depth0 != null ? depth0.sharePermission : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"sharePermission\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t\t\t\t<label for=\\\"canShare-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.canShareLabel || (depth0 != null ? depth0.canShareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"canShareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\";\n    },\n    \"4\": function _(container, depth0, helpers, partials, data) {\n      return \"checked=\\\"checked\\\"\";\n    },\n    \"6\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {};\n      return \"\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.createPermissionPossible : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(7, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.updatePermissionPossible : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(10, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\t\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.deletePermissionPossible : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(13, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\";\n    },\n    \"7\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers.unless.call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isMailShare : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(8, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"8\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canCreate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"create\\\" class=\\\"permissions checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasCreatePermission : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" data-permissions=\\\"\" + alias4((helper = (helper = helpers.createPermission || (depth0 != null ? depth0.createPermission : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"createPermission\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canCreate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.createPermissionLabel || (depth0 != null ? depth0.createPermissionLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"createPermissionLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\";\n    },\n    \"10\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers.unless.call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isMailShare : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(11, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"11\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canUpdate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"update\\\" class=\\\"permissions checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasUpdatePermission : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" data-permissions=\\\"\" + alias4((helper = (helper = helpers.updatePermission || (depth0 != null ? depth0.updatePermission : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"updatePermission\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canUpdate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.updatePermissionLabel || (depth0 != null ? depth0.updatePermissionLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"updatePermissionLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t\";\n    },\n    \"13\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers.unless.call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isMailShare : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(14, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"14\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canDelete-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"delete\\\" class=\\\"permissions checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasDeletePermission : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" data-permissions=\\\"\" + alias4((helper = (helper = helpers.deletePermission || (depth0 != null ? depth0.deletePermission : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"deletePermission\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canDelete-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.deletePermissionLabel || (depth0 != null ? depth0.deletePermissionLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"deletePermissionLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t\";\n    },\n    \"16\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasCreatePermission : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(17, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input id=\\\"password-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"password\\\" class=\\\"password checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordSet : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordSet : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(19, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" />\\n\t\t\t\t\t<label for=\\\"password-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.passwordLabel || (depth0 != null ? depth0.passwordLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"passwordMenu-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.isPasswordSet : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(22, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t\t<span class=\\\"passwordContainer-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" icon-passwordmail menuitem\\\">\\n\t\t\t\t\t<label for=\\\"passwordField-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\" + alias4((helper = (helper = helpers.password || (depth0 != null ? depth0.password : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"password\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.passwordLabel || (depth0 != null ? depth0.passwordLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t<input id=\\\"passwordField-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"passwordField\\\" type=\\\"password\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordPlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" value=\\\"\" + alias4((helper = (helper = helpers.passwordValue || (depth0 != null ? depth0.passwordValue : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordValue\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isTalkEnabled : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(24, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\");\n    },\n    \"17\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"secureDrop-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"secureDrop\\\" class=\\\"checkbox secureDrop\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.secureDropMode : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" data-permissions=\\\"\" + alias4((helper = (helper = helpers.readPermission || (depth0 != null ? depth0.readPermission : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"readPermission\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"secureDrop-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.secureDropLabel || (depth0 != null ? depth0.secureDropLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"secureDropLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\";\n    },\n    \"19\": function _(container, depth0, helpers, partials, data) {\n      var stack1;\n      return (stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isPasswordForMailSharesRequired : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(20, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\";\n    },\n    \"20\": function _(container, depth0, helpers, partials, data) {\n      return \"disabled=\\\"\\\"\";\n    },\n    \"22\": function _(container, depth0, helpers, partials, data) {\n      return \"hidden\";\n    },\n    \"24\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"passwordByTalk-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"passwordByTalk\\\" class=\\\"passwordByTalk checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isPasswordByTalkSet : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \" />\\n\t\t\t\t\t\t<label for=\\\"passwordByTalk-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordByTalkLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t<li class=\\\"passwordByTalkMenu-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.isPasswordByTalkSet : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(22, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t\t\t<span class=\\\"passwordByTalkContainer-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" icon-passwordtalk menuitem\\\">\\n\t\t\t\t\t\t<label for=\\\"passwordByTalkField-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\" + alias4((helper = (helper = helpers.password || (depth0 != null ? depth0.password : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"password\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordByTalkLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t\t\t<input id=\\\"passwordByTalkField-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"passwordField\\\" type=\\\"password\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.passwordByTalkPlaceholder || (depth0 != null ? depth0.passwordByTalkPlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordByTalkPlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" value=\\\"\" + alias4((helper = (helper = helpers.passwordValue || (depth0 != null ? depth0.passwordValue : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"passwordValue\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\";\n    },\n    \"26\": function _(container, depth0, helpers, partials, data) {\n      var helper;\n      return container.escapeExpression((helper = (helper = helpers.expireDate || (depth0 != null ? depth0.expireDate : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"expireDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper));\n    },\n    \"28\": function _(container, depth0, helpers, partials, data) {\n      var helper;\n      return container.escapeExpression((helper = (helper = helpers.defaultExpireDate || (depth0 != null ? depth0.defaultExpireDate : depth0)) != null ? helper : helpers.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"defaultExpireDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper));\n    },\n    \"30\": function _(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t\t\t<li>\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"share-add\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<span class=\\\"icon icon-edit\\\"></span>\\n\t\t\t\t\t<span>\" + alias4((helper = (helper = helpers.addNoteLabel || (depth0 != null ? depth0.addNoteLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"addNoteLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span>\\n\t\t\t\t\t<input type=\\\"button\\\" class=\\\"share-note-delete icon-delete \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasNote : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(22, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t\t</a>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"share-note-form \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasNote : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(22, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t\t<span class=\\\"menuitem icon-note\\\">\\n\t\t\t\t\t<textarea class=\\\"share-note\\\">\" + alias4((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareNote\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</textarea>\\n\t\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-note-submit\\\" value=\\\"\\\" id=\\\"add-note-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1,\n          helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"<div class=\\\"popovermenu bubble hidden menu\\\">\\n\t<ul>\\n\t\t\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isResharingAllowed : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isFolder : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(6, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isMailShare : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(16, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t<li>\\n\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t<input id=\\\"expireDate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" type=\\\"checkbox\\\" name=\\\"expirationDate\\\" class=\\\"expireDate checkbox\\\" \" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(4, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" />\\n\t\t\t\t<label for=\\\"expireDate-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.expireDateLabel || (depth0 != null ? depth0.expireDateLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expireDateLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t</span>\\n\t\t</li>\\n\t\t<li class=\\\"expirationDateMenu-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" \" + ((stack1 = helpers.unless.call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"unless\",\n        \"hash\": {},\n        \"fn\": container.program(22, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\">\\n\t\t\t<span class=\\\"expirationDateContainer-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \" icon-expiredate menuitem\\\">\\n\t\t\t\t<label for=\\\"expirationDatePicker-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\" + alias4((helper = (helper = helpers.expirationDate || (depth0 != null ? depth0.expirationDate : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationDate\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\">\" + alias4((helper = (helper = helpers.expirationLabel || (depth0 != null ? depth0.expirationLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t\t\t\t<input id=\\\"expirationDatePicker-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"-\" + alias4((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareId\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"datepicker\\\" type=\\\"text\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.expirationDatePlaceholder || (depth0 != null ? depth0.expirationDatePlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"expirationDatePlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" value=\\\"\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.hasExpireDate : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(26, data, 0),\n        \"inverse\": container.program(28, data, 0),\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\" + ((stack1 = helpers[\"if\"].call(alias1, depth0 != null ? depth0.isNoteAvailable : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(30, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span>\" + alias4((helper = (helper = helpers.unshareLabel || (depth0 != null ? depth0.unshareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"unshareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</span></a>\\n\t\t</li>\\n\t</ul>\\n</div>\\n\";\n    },\n    \"useData\": true\n  });\n  templates['sharedialogview'] = template({\n    \"1\": function _(container, depth0, helpers, partials, data) {\n      var helper,\n          alias1 = depth0 != null ? depth0 : container.nullContext || {},\n          alias2 = helpers.helperMissing,\n          alias3 = \"function\",\n          alias4 = container.escapeExpression;\n      return \"\t<label for=\\\"shareWith-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"hidden-visually\\\">\" + alias4((helper = (helper = helpers.shareLabel || (depth0 != null ? depth0.shareLabel : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"shareLabel\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"</label>\\n\t<div class=\\\"oneline\\\">\\n\t\t<input id=\\\"shareWith-\" + alias4((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"cid\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" class=\\\"shareWithField\\\" type=\\\"text\\\" placeholder=\\\"\" + alias4((helper = (helper = helpers.sharePlaceholder || (depth0 != null ? depth0.sharePlaceholder : depth0)) != null ? helper : alias2, _typeof(helper) === alias3 ? helper.call(alias1, {\n        \"name\": \"sharePlaceholder\",\n        \"hash\": {},\n        \"data\": data\n      }) : helper)) + \"\\\" />\\n\t\t<span class=\\\"shareWithLoading icon-loading-small hidden\\\"></span>\\n\t\t<span class=\\\"shareWithConfirm icon icon-confirm\\\"></span>\\n\t</div>\\n\";\n    },\n    \"compiler\": [7, \">= 4.0.0\"],\n    \"main\": function main(container, depth0, helpers, partials, data) {\n      var stack1;\n      return \"<div class=\\\"resharerInfoView subView\\\"></div>\\n\" + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? depth0.isSharingAllowed : depth0, {\n        \"name\": \"if\",\n        \"hash\": {},\n        \"fn\": container.program(1, data, 0),\n        \"inverse\": container.noop,\n        \"data\": data\n      })) != null ? stack1 : \"\") + \"<div class=\\\"linkShareView subView\\\"></div>\\n<div class=\\\"shareeListView subView\\\"></div>\\n<div class=\\\"loading hidden\\\" style=\\\"height: 50px\\\"></div>\\n\";\n    },\n    \"useData\": true\n  });\n})();"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACz4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACniCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC78BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}